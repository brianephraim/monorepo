{"version":3,"sources":["webpack:///webpack/bootstrap b64d532fd43ee624dc26","webpack:///./testdevenv2.js","webpack:///external \"terminate\"","webpack:///external \"assert\"","webpack:///external \"path\"","webpack:///external \"fs-extra\"","webpack:///external \"website-scraper\"","webpack:///external \"node-uuid\"","webpack:///external \"single-line-log\"","webpack:///external \"mocha\"","webpack:///../core/shellCommand.js","webpack:///external \"child_process\"","webpack:///../core/fancyLog.js","webpack:///external \"chalk\"","webpack:///external \"color-pairs-picker\"","webpack:///external \"has-ansi\"","webpack:///../core/getDevEnvRoot.js"],"names":["devEnvRoot","__dirname","monorepoDir","resolve","symlinkNodeModulesContents","nodeModulesOriginalPath","nodeModulesCopyPath","promises","readdirSync","forEach","file","push","symlinkSync","Promise","all","binPromises","devEnvCopyPackageDotJsonPath","devEnvCopyPath","binCopyPath","devEnvCopyPackageDotJson","readJsonSync","devEnvBinDict","bin","Object","keys","key","val","createScatteredPackageProject","testProjectPath","contentToBundle","devEnvOriginalPath","pathToMain","devEnvCopyDistPath","binOriginalPath","removeSync","ensureDirSync","copySync","writeFile","writeFileSync","then","cmd","duringProcess","onData","onStderr","makeShellCmdStr","cleanup","early","assetsToGenerate","duringProcessBefore","done","timeout","forceCommand","pathToDemoEntry","assetInfo","path","dir","dirname","text","isDemoEntry","console","log","devEnvProcess","finished","finish","stdout","on","data","dataString","toString","stderr","code","duringServer","useDist","onAsset","scrapeDir","once","prepublish","indexOf","urls","directory","resourceSaver","resource","err","reject","pid","duringTest","testPathPattern","bundleHasContent","equal","only","notFoundError","importToAttempt","testsPassed","module","exports","commandToRun","options","stdio","killParentOnExit","command","args","childProcess","require","proc","spawn","signal","process","kill","exit","chalkLib","colorPairsPicker","hasAnsi","chalk","constructor","level","formatLog","color","heading","bg","contrast","split","map","item","fg","rgb","bgRgb","length","find","keyword","ensureTrailingSlash","str","replace","join"],"mappings":"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","file":"testdevenv2.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap b64d532fd43ee624dc26","/* eslint-disable class-methods-use-this */\nimport terminate from 'terminate';\nimport assert from 'assert';\nimport path from 'path';\nimport fs from 'fs-extra';\nimport scrape from 'website-scraper';\nimport { v4 as makeUuid } from 'node-uuid';\nimport { stdout as singleLineLog } from 'single-line-log';\nimport { it, describe, before } from 'mocha';\nimport shellCommand from '../core/shellCommand';\nimport fancyLog from '../core/fancyLog';\nimport getDevEnvRoot from '../core/getDevEnvRoot';\n\n\n\nconst devEnvRoot = getDevEnvRoot(__dirname);\nconst monorepoDir = path.resolve(__dirname, '../../../');\n\nconst symlinkNodeModulesContents = (nodeModulesOriginalPath, nodeModulesCopyPath) => {\n  const promises = [];\n  fs.readdirSync(nodeModulesOriginalPath).forEach((file) => {\n    if (file !== '.bin') {\n      singleLineLog(`symlinking node_modules content: ${file}\\n`);\n      promises.push(\n        fs.symlinkSync(\n          path.resolve(nodeModulesOriginalPath, file),\n          path.resolve(nodeModulesCopyPath, file)),\n      );\n    }\n  });\n  return Promise.all(promises);\n};\n\nconst binPromises = (devEnvCopyPackageDotJsonPath, devEnvCopyPath, binCopyPath) => {\n  const promises = [];\n  const devEnvCopyPackageDotJson = fs.readJsonSync(devEnvCopyPackageDotJsonPath);\n  const devEnvBinDict = devEnvCopyPackageDotJson.bin;\n  Object.keys(devEnvBinDict).forEach((key) => {\n    const val = devEnvBinDict[key];\n    singleLineLog(`symlinking devEnv bin content: ${key}\\n`);\n    promises.push(\n      fs.symlinkSync(path.resolve(devEnvCopyPath, val), path.resolve(binCopyPath, `./${key}`)),\n    );\n  });\n  return Promise.all(promises);\n};\n\nfunction createScatteredPackageProject(testProjectPath, contentToBundle) {\n  const devEnvOriginalPath = path.resolve(monorepoDir, './packages/dev_env');\n  const nodeModulesOriginalPath = path.resolve(monorepoDir, './node_modules');\n  const nodeModulesCopyPath = path.resolve(testProjectPath, './node_modules');\n  const pathToMain = path.resolve(testProjectPath, './testdevenv-main.demo.js');\n  const devEnvCopyPath = path.resolve(nodeModulesCopyPath, './dev_env');\n  const devEnvCopyPackageDotJsonPath = path.resolve(devEnvCopyPath, './package.json');\n  const devEnvCopyDistPath = path.resolve(devEnvCopyPath, './dist');\n  const binCopyPath = path.resolve(nodeModulesCopyPath, './.bin');\n  const binOriginalPath = path.resolve(nodeModulesOriginalPath, './.bin');\n\n  const promises = [\n    fs.removeSync(testProjectPath),\n    fs.ensureDirSync(testProjectPath),\n    fs.ensureDirSync(nodeModulesCopyPath),\n    fs.ensureDirSync(devEnvCopyPath),\n    fs.copySync(path.resolve(devEnvRoot, './package.json'), devEnvCopyPackageDotJsonPath),\n    fs.copySync(path.resolve(devEnvRoot, './bin'), path.resolve(devEnvCopyPath, './bin')),\n    fs.copySync(binOriginalPath, binCopyPath),\n    fs.writeFile(pathToMain, `document.body.append('${contentToBundle}');`),\n    fs.writeFileSync(path.resolve(testProjectPath, './package.json'), `{\n      \"name\": \"test-project-for-dev-env\",\n      \"version\": \"0.0.2\",\n      \"publishConfig\": {\n        \"access\": \"public\"\n      },\n      \"scripts\": {\n        \"dev\": \"devenv\"\n      },\n      \"devDependencies\": {\n        \"@defualt/dev_env\": \"^0.0.14\"\n      },\n      \"repository\": {\n        \"type\": \"git\",\n        \"url\": \"https://github.com/defualt/test-project-for-dev-env.git\"\n      }\n    }`),\n  ];\n\n\n  promises.push(symlinkNodeModulesContents(\n    nodeModulesOriginalPath,\n    nodeModulesCopyPath,\n  ));\n\n  promises.push(binPromises(\n    devEnvCopyPackageDotJsonPath,\n    devEnvCopyPath,\n    binCopyPath,\n  ));\n\n  return Promise.all(promises).then(() => {\n    const cmd = `(cd ${devEnvOriginalPath} && npm run prepublish) && cp -rf ${path.resolve(devEnvRoot, './dist')} ${devEnvCopyDistPath} && (cd ${testProjectPath} && npm run dev)`;\n    return cmd;\n  });\n}\n\nfunction duringProcess({\n  onData = () => {},\n  onStderr = () => {},\n  makeShellCmdStr = () => {},\n  cleanup = () => { return Promise.resolve(); },\n  early = () => { return Promise.resolve(); },\n  assetsToGenerate = [],\n}) {\n  before(function duringProcessBefore(done) {\n    this.timeout(60000);\n    early().then((forceCommand) => {\n      let pathToDemoEntry;\n      assetsToGenerate.forEach((assetInfo) => {\n        fancyLog('green', 'GENERATING', assetInfo.path);\n        const dir = path.dirname(assetInfo.path);\n        fs.ensureDirSync(dir);\n        fs.writeFileSync(assetInfo.path, assetInfo.text);\n        if (assetInfo.isDemoEntry) {\n          pathToDemoEntry = assetInfo.path;\n        }\n      });\n      const cmd = forceCommand || makeShellCmdStr(pathToDemoEntry);\n      console.log('COOOOOOOMAND', cmd);\n      const devEnvProcess = shellCommand(cmd, null, false);\n      let finished = false;\n      function finish() {\n        if (finished) {\n          return;\n        }\n        fancyLog('green', 'FINISHED');\n        finished = true;\n        cleanup(devEnvProcess).then(() => {\n          fancyLog('orange', 'remove assets');\n          assetsToGenerate.forEach((assetInfo) => {\n            const dir = path.dirname(assetInfo.path);\n            fs.removeSync(dir);\n          });\n          fancyLog('orange', 'before\\'s done() called');\n          done();\n        });\n      }\n      devEnvProcess.stdout.on('data', (data) => {\n        const dataString = data.toString();\n        fancyLog('blue', 'devEnvProcess.stdout:', dataString);\n        onData(dataString, finish);\n      });\n      devEnvProcess.stderr.on('data', (data) => {\n        if (data && data.toString) {\n          data = data.toString();\n          onStderr(data);\n        }\n        fancyLog('cyan', 'devEnvProcess.stderr:', data);\n      });\n      devEnvProcess.on('exit', (code) => {\n        fancyLog('yellow', 'child process exited with code:', code);\n        finish();\n      });\n    });\n  });\n}\n\nfunction duringServer({\n  useDist,\n  onAsset = () => {},\n  onData = () => {},\n  cleanup = () => { return Promise.resolve(); },\n  makeShellCmdStr,\n  assetsToGenerate,\n  early,\n  onStderr,\n}) {\n  const scrapeDir = path.resolve(__dirname, './scrape');\n  let once = false;\n  duringProcess({\n    onStderr,\n    assetsToGenerate,\n    early,\n    makeShellCmdStr: (pathToDemoEntry) => {\n      if (makeShellCmdStr) {\n        return makeShellCmdStr(pathToDemoEntry);\n      }\n      const prepublish = useDist ? `(cd ${devEnvRoot} && npm run prepublish) && ` : '';\n      return `(\n        ${prepublish}npm run dev -- --demo-entry='${pathToDemoEntry}'${useDist ? ' --use-dist' : ''} \n      )`;\n    },\n    onData: (dataString, finish) => {\n      onData(dataString, finish);\n      if (dataString.indexOf('webpack: Failed to compile.') !== -1 && !once) {\n        once = true;\n        finish();\n      }\n      if (dataString.indexOf('webpack: Compiled successfully.') !== -1 && !once) {\n        once = true;\n        scrape({\n          urls: ['http://localhost:3000/'],\n          directory: scrapeDir,\n          resourceSaver: class MyResourceSaver {\n            saveResource(resource) {\n              onAsset(resource);\n            }\n            errorCleanup(err) {\n              fancyLog('pink', 'scrape resource error:', err);\n            }\n          },\n        }).then(() => {\n          finish();\n        });\n      }\n    },\n    cleanup: (devEnvProcess) => {\n      return new Promise((resolve, reject) => {\n        fancyLog('orange', 'terminate start');\n        terminate(devEnvProcess.pid, (err) => {\n          fancyLog('orange', 'terminate end');\n          if (err) {\n            fancyLog('red', 'Oopsy during terminate:', err);\n            reject();\n          } else {\n            fancyLog('green', 'done for terminate');\n            cleanup(devEnvProcess);\n            fs.removeSync(scrapeDir);\n            resolve();\n          }\n        });\n      });\n    },\n  });\n}\n\nfunction duringTest({\n  testPathPattern,\n  onStderr,\n  onData,\n  cleanup,\n  assetsToGenerate,\n}) {\n  duringProcess({\n    onStderr,\n    onData,\n    assetsToGenerate,\n    cleanup,\n    makeShellCmdStr: () => {\n      return `(\n        npm run testpackages -- --watch=false --testPathPattern='${testPathPattern}'\n      )`;\n    },\n  });\n}\n\n\ndescribe('testdevenv', () => {\n  describe('localhost dev environment of monorepo via on demand compiled script', () => {\n    const contentToBundle = makeUuid();\n    let bundleHasContent = false;\n\n    duringServer({\n      assetsToGenerate: [\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-main/testdevenv-main.js'),\n          text: `document.body.append('${contentToBundle}');`,\n          isDemoEntry: true,\n        },\n      ],\n      onAsset: (resource) => {\n        bundleHasContent = bundleHasContent || resource.text.indexOf(contentToBundle) !== -1;\n      },\n    });\n    it('basic bundleHasContent', () => {\n      assert.equal(bundleHasContent, true);\n    });\n  });\n\n  describe('localhost dev environment of monorepo via pre-compiled script', () => {\n    const contentToBundle = makeUuid();\n    let bundleHasContent = false;\n    duringServer({\n      useDist: true,\n      assetsToGenerate: [\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-main/testdevenv-main.js'),\n          text: `document.body.append('${contentToBundle}');`,\n          isDemoEntry: true,\n        },\n      ],\n      onAsset: (resource) => {\n        bundleHasContent = bundleHasContent || resource.text.indexOf(contentToBundle) !== -1;\n      },\n    });\n    it('basic bundleHasContent', () => {\n      assert.equal(bundleHasContent, true);\n    });\n  });\n\n  describe.only('localhost dev environment of scattered package repo via pre-compiled script, similar to npm usage', () => {\n    const contentToBundle = makeUuid();\n    const testProjectPath = path.resolve(monorepoDir, '../testdevenv-main/asdf');\n\n    let bundleHasContent = false;\n    duringServer({\n      cleanup: () => {\n        fancyLog('orange', 'remove testProjectPath');\n        fs.removeSync(testProjectPath);\n      },\n      early: () => {\n        fancyLog('orange', 'EARLY');\n        return createScatteredPackageProject(testProjectPath, contentToBundle);\n      },\n\n      onAsset: (resource) => {\n        bundleHasContent = bundleHasContent || resource.text.indexOf(contentToBundle) !== -1;\n      },\n    });\n    it('basic bundleHasContent', () => {\n      assert.equal(bundleHasContent, true);\n    });\n  });\n\n  describe('non-existent imports', () => {\n    let notFoundError = false;\n    const importToAttempt = 'testdevenv-some-depMAYBE-A-TYPO';\n    duringServer({\n      assetsToGenerate: [\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-main/testdevenv-main.js'),\n          text: `import someDep from '${importToAttempt}';\\n;someDep();`,\n          isDemoEntry: true,\n        },\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-some-dep/testdevenv-some-dep.js'),\n          text: 'export default () => { document.body.append(\"testdevenv-some-dep\"); };',\n        },\n      ],\n      onStderr: (data) => {\n        notFoundError = notFoundError || data.indexOf(`Module not found: Error: Can't resolve '${importToAttempt}'`) !== -1;\n      },\n    });\n    it('webpack bundling throws error for non-existent imports within assets', () => {\n      assert.equal(notFoundError, true);\n    });\n  });\n\n  describe('existent imports', () => {\n    const contentToBundle = makeUuid();\n    let bundleHasContent = false;\n    const importToAttempt = 'testdevenv-some-dep';\n    duringServer({\n      assetsToGenerate: [\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-main/testdevenv-main.js'),\n          text: `import someDep from '${importToAttempt}';\\n;someDep();`,\n          isDemoEntry: true,\n        },\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-some-dep/testdevenv-some-dep.js'),\n          text: `export default () => { document.body.append('${contentToBundle}'); };`,\n        },\n      ],\n      onAsset: (resource) => {\n        bundleHasContent = bundleHasContent || resource.text.indexOf(contentToBundle) !== -1;\n      },\n    });\n    it('bundleHasContent proving import bundling', () => {\n      assert.equal(bundleHasContent, true);\n    });\n  });\n\n  describe('existent imports with npm-scoping', () => {\n    const contentToBundle = makeUuid();\n    let bundleHasContent = false;\n    const importToAttempt = 'testdevenv-some-dep';\n    duringServer({\n      assetsToGenerate: [\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-main/testdevenv-main.js'),\n          text: `import someDep from '@some-npm-scope/${importToAttempt}';\\n;someDep();`,\n          isDemoEntry: true,\n        },\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-some-dep/testdevenv-some-dep.js'),\n          text: `export default () => { document.body.append('${contentToBundle}'); };`,\n        },\n      ],\n      onAsset: (resource) => {\n        bundleHasContent = bundleHasContent || resource.text.indexOf(contentToBundle) !== -1;\n      },\n    });\n    it('bundleHasContent proving npm-scoped import bundling', () => {\n      assert.equal(bundleHasContent, true);\n    });\n  });\n\n  describe('test', () => {\n    const contentToBundle = makeUuid();\n    let testsPassed = false;\n    const importToAttempt = 'testdevenv-some-dep';\n    duringTest({\n      testPathPattern: '.*/testdevenv-some-dep/.*',\n      assetsToGenerate: [\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-main/testdevenv-main.js'),\n          text: `import someDep from '${importToAttempt}';\\n;someDep();`,\n          isDemoEntry: true,\n        },\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-some-dep/testdevenv-some-dep.js'),\n          text: `export default () => { document.body.append('${contentToBundle}'); };`,\n        },\n        {\n          path: path.resolve(monorepoDir, './packages/testdevenv-some-dep/testdevenv-some-dep.test.js'),\n          text: 'test(\"adds 1 + 2 to equal 3\", () => { expect(1 + 2).toBe(3); });',\n        },\n      ],\n      onStderr: (data) => {\n        testsPassed = testsPassed || data.indexOf('1 passed, 1 total') !== -1;\n      },\n    });\n    it('testtesttest', () => {\n      assert.equal(testsPassed, true);\n    });\n  });\n});\n\n\n\n// WEBPACK FOOTER //\n// ./testdevenv2.js","module.exports = require(\"terminate\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"terminate\"\n// module id = 1\n// module chunks = 0","module.exports = require(\"assert\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"assert\"\n// module id = 2\n// module chunks = 0","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"website-scraper\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"website-scraper\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"node-uuid\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-uuid\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"single-line-log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"single-line-log\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"mocha\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mocha\"\n// module id = 8\n// module chunks = 0","/* eslint-disable global-require */\nmodule.exports = (commandToRun, options = { stdio: 'inherit' }, killParentOnExit = true) => {\n  const command = 'sh';\n  const args = [\n    '-c',\n    // commandToRun.replace('node $TMPFILE','node --inspect=9223 $TMPFILE'),\n    commandToRun,\n  ];\n  //\n  // kexec doesn't work in windows, so fallback to child_process.spawn\n  // this logic copied from babel-cli/lib/babel-node.js\n  // try {\n  //   const kexec = require('kexec');\n  //   kexec(command, args);\n  // } catch (err) {\n    // if (err.code !== 'MODULE_NOT_FOUND') throw err;\n\n  const childProcess = require('child_process');\n  const proc = childProcess.spawn(command, args, options || {});\n  proc.on('exit', (code, signal) => {\n    if (killParentOnExit) {\n      process.on('exit', () => {\n        if (signal) {\n          process.kill(process.pid, signal);\n        } else {\n          process.exit(code);\n        }\n      });\n    }\n  });\n  return proc;\n  // }\n};\n\n\n\n// WEBPACK FOOTER //\n// ../core/shellCommand.js","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 10\n// module chunks = 0","/* eslint-disable no-console */\nconst chalkLib = require('chalk');\nconst colorPairsPicker = require('color-pairs-picker');\nconst hasAnsi = require('has-ansi');\n\n\nconst chalk = new chalkLib.constructor({ level: 3 });\nfunction formatLog(color, heading, ...args) {\n  const bg = colorPairsPicker(color, { contrast: 8 }).bg.split('(')[1].split(')')[0].split(',').map((item) => {\n    return +item;\n  });\n  const fg = colorPairsPicker(color, { contrast: 8 }).fg.split('(')[1].split(')')[0].split(',').map((item) => {\n    return +item;\n  });\n  console.log(chalk.rgb(...fg).bgRgb(...bg)(heading));\n  if (args && args.length) {\n    if (typeof args.find((item) => { return hasAnsi(item); }) === 'undefined') {\n      console.log(chalk.keyword(color)(...args));\n    } else {\n      console.log(...args);\n    }\n  }\n}\nmodule.exports = formatLog;\n\n\n\n// WEBPACK FOOTER //\n// ../core/fancyLog.js","module.exports = require(\"chalk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"chalk\"\n// module id = 12\n// module chunks = 0","module.exports = require(\"color-pairs-picker\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"color-pairs-picker\"\n// module id = 13\n// module chunks = 0","module.exports = require(\"has-ansi\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"has-ansi\"\n// module id = 14\n// module chunks = 0","function ensureTrailingSlash(str) {\n  return str.replace(/\\/?$/, '/');\n}\nmodule.exports = () => {\n  let devEnvRoot = ensureTrailingSlash(__dirname).split('/dev_env/');\n  devEnvRoot[devEnvRoot.length - 1] = '';\n  devEnvRoot = devEnvRoot.join('/dev_env/');\n  return devEnvRoot;\n};\n\n\n\n// WEBPACK FOOTER //\n// ../core/getDevEnvRoot.js"],"sourceRoot":""}