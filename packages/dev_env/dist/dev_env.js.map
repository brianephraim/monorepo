{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 15e8249ffa7477f46194","webpack:///external \"path\"","webpack:///external \"webpack\"","webpack:///external \"yargs\"","webpack:///external \"express\"","webpack:///./core/webpackRunCompiler.js","webpack:///external \"fs-extra\"","webpack:///external \"child_process\"","webpack:///./webpackConfig.js","webpack:///./core/webpack-config-resolve.js","webpack:///external \"babel-polyfill\"","webpack:///external \"fs\"","webpack:///./dev_env.js","webpack:///./core/shellCommand.js","webpack:///./jest/jestSpawnProcess.js","webpack:///./core/webpackBuildCommandLine.js","webpack:///external \"globby\"","webpack:///./core/webpackEnhanceConfigNode.js","webpack:///external \"webpack-node-externals\"","webpack:///./core/webpackEnhanceBaseConfig.js","webpack:///external \"directory-named-webpack-plugin\"","webpack:///./core/parseRequestResolvePlugin.js","webpack:///external \"single-line-log\"","webpack:///./core/webpackEnhanceImmediateConfig.js","webpack:///./webpackExpressServer.js","webpack:///./universal/server/demoEndpoints.js","webpack:///external \"cookie-parser\"","webpack:///./universal/server/api.js","webpack:///./startUniversalExpress.js","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-hot-middleware\"","webpack:///external \"webpack-hot-server-middleware\"","webpack:///external \"rimraf\"","webpack:///./universal/webpack/universalWebpackConfig.js","webpack:///external \"extract-css-chunks-webpack-plugin\"","webpack:///external \"autodll-webpack-plugin\"","webpack:///external \"write-file-webpack-plugin\"","webpack:///external \"stats-webpack-plugin\"","webpack:///external \"webpack/lib/ProgressPlugin\"","webpack:///external \"node-sass-json-importer\"","webpack:///./webpackParseStatsForDepProblems.js","webpack:///external \"validate-npm-package-name\"","webpack:///.. lazy ^\\.\\/.*\\.express$","webpack:///external \"jquery-deferred\"","webpack:///external \"aws-sdk\"","webpack:///external \"url\"","webpack:///external \"sharp\"","webpack:///external \"ejs\"","webpack:///external \"mongoose\"","webpack:///external \"mongodb-uri\"","webpack:///external \"mime-types\"","webpack:///external \"https\"","webpack:///external \"http\"","webpack:///external \"deep-get-set\"","webpack:///external \"busboy\""],"names":["processed","console","log","activeWebpackDevMiddleware","Promise","resolve","reject","toUse","run","err","stats","error","stack","details","info","toJson","hasErrors","errors","forEach","e","hasWarnings","warnings","w","warn","removeKeysWithEmptyVals","obj","Object","keys","reduce","accum","key","length","makeOutputSettingsFromFilePath","filePath","output","split","filename","pop","path","join","makeOutputFiles","libraryNameReduced","isBuild","outputFiles","library","libraryMin","demo","makeEntry","libraryName","dirRoot","MainApp","sync","generateConfigJson","options","isCommandLine","entry","isMocha","config","main","env","dirroot","process","cwd","packageJson","readJsonSync","name","libraryTarget","umdNamedDefine","publicPath","DirectoryNamedWebpackPlugin","require","parseRequestResolvePlugin","basename","inNodeModulesRE","DirectoryDefaultFilePlugin","apply","resolver","plugin","req","done","directory","request","match","fileSystem","stat","isDirectory","index","isFile","assign","doResolve","module","exports","modules","extensions","plugins","requestStr","indexOf","shift","item","testdevenv","watch","testPathPattern","serve","arguments","commandToRun","stdio","killParentOnExit","command","args","childProcess","proc","spawn","on","code","signal","kill","pid","exit","configPath","__dirname","commandBody","enhance","originalConfig","rules","test","use","push","BannerPlugin","banner","raw","entryOnly","devtool","target","node","__filename","externals","modulesDir","loader","exclude","singleLineLog","stdout","printProgress","progress","clearLine","parseRequest","callback","newRequestStr","compiler","setModuleConstant","expressionName","fn","compilation","data","normalModuleFactory","parser","compilerParserPlugin","state","current","addVariable","JSON","stringify","resource","context","serverNamespaces","servers","app","asyncRecurseStartApps","then","startWebpack","static","port","listen","i","recurse","backendAppNamespace","System","someBackendApp","serveBackendApp","default","backendAppSettings","nameSpace","nextNamespace","demoExpress","res","next","cookie","cookies","jwToken","maxAge","get","headers","authorization","params","category","json","slug","findVideos","fakeDelay","fpVideos","reactReduxVideos","dbGraphqlVideos","findVideo","allVideos","find","video","ms","setTimeout","youtubeId","title","by","color","tip","concat","startUniversal","p","clientDevConfig","isClient","isDev","isUniversal","serverDevConfig","serverNonUniversalConfig","outputPath","invalidHandler","fileName","changeTime","statSync","colors","multiCompiler","clientCompiler","compilers","waitUntilValid","serverRendererOptions","NODE_ENV","clientProdConfig","serverProdConfig","serverCompiler","clientConfig","serverRender","__non_webpack_require__","clientStats","webpack","ExtractCssChunks","AutoDllPlugin","WriteFilePlugin","resolve2","StatsPlugin","ProgressPlugin","jsonImporter","makeProgressPlugin","percentage","msg","active","modulepath","isTTY","cursorTo","substr","write","toFixed","fs","readdirSync","filter","x","mod","chunkFilename","extract","localIdentName","importer","optimize","CommonsChunkPlugin","names","minChunks","Infinity","HotModuleReplacementPlugin","NoEmitOnErrorsPlugin","DefinePlugin","UglifyJsPlugin","compress","screw_ie8","mangle","comments","sourceMap","HashedModuleIdsPlugin","vendor","LimitChunkCountPlugin","maxChunks","ensureTrailingSlash","str","replace","ensureReadJsonSync","packageDotJsonPath","packageDotJsonContent","showProblemsInConsole","problems","moduleResource","depName","problemMsg","problemInfo","findDependenciesProblems","dependencies","dep","rawRequest","validationResult","validForNewPackages","devDependencies","webpackParseStatsForDepProblems","shouldShowProblemsInConsole","isMonorepo","existsSync","packageDotJsonCache","packagesDir","packageFolderName","packageSomehowPublic","private","privateFromGithub","depProblems"],"mappings":"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","file":"dist/dev_env.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"path\"), require(\"webpack\"), require(\"yargs\"), require(\"express\"), require(\"fs-extra\"), require(\"child_process\"), require(\"babel-polyfill\"), require(\"fs\"), require(\"globby\"), require(\"webpack-node-externals\"), require(\"directory-named-webpack-plugin\"), require(\"single-line-log\"), require(\"cookie-parser\"), require(\"webpack-dev-middleware\"), require(\"webpack-hot-middleware\"), require(\"webpack-hot-server-middleware\"), require(\"rimraf\"), require(\"extract-css-chunks-webpack-plugin\"), require(\"autodll-webpack-plugin\"), require(\"write-file-webpack-plugin\"), require(\"stats-webpack-plugin\"), require(\"webpack/lib/ProgressPlugin\"), require(\"node-sass-json-importer\"), require(\"validate-npm-package-name\"), require(\"jquery-deferred\"), require(\"aws-sdk\"), require(\"url\"), require(\"sharp\"), require(\"ejs\"), require(\"mongoose\"), require(\"mongodb-uri\"), require(\"mime-types\"), require(\"https\"), require(\"http\"), require(\"deep-get-set\"), require(\"busboy\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@defualt/dev_env\", [\"path\", \"webpack\", \"yargs\", \"express\", \"fs-extra\", \"child_process\", \"babel-polyfill\", \"fs\", \"globby\", \"webpack-node-externals\", \"directory-named-webpack-plugin\", \"single-line-log\", \"cookie-parser\", \"webpack-dev-middleware\", \"webpack-hot-middleware\", \"webpack-hot-server-middleware\", \"rimraf\", \"extract-css-chunks-webpack-plugin\", \"autodll-webpack-plugin\", \"write-file-webpack-plugin\", \"stats-webpack-plugin\", \"webpack/lib/ProgressPlugin\", \"node-sass-json-importer\", \"validate-npm-package-name\", \"jquery-deferred\", \"aws-sdk\", \"url\", \"sharp\", \"ejs\", \"mongoose\", \"mongodb-uri\", \"mime-types\", \"https\", \"http\", \"deep-get-set\", \"busboy\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@defualt/dev_env\"] = factory(require(\"path\"), require(\"webpack\"), require(\"yargs\"), require(\"express\"), require(\"fs-extra\"), require(\"child_process\"), require(\"babel-polyfill\"), require(\"fs\"), require(\"globby\"), require(\"webpack-node-externals\"), require(\"directory-named-webpack-plugin\"), require(\"single-line-log\"), require(\"cookie-parser\"), require(\"webpack-dev-middleware\"), require(\"webpack-hot-middleware\"), require(\"webpack-hot-server-middleware\"), require(\"rimraf\"), require(\"extract-css-chunks-webpack-plugin\"), require(\"autodll-webpack-plugin\"), require(\"write-file-webpack-plugin\"), require(\"stats-webpack-plugin\"), require(\"webpack/lib/ProgressPlugin\"), require(\"node-sass-json-importer\"), require(\"validate-npm-package-name\"), require(\"jquery-deferred\"), require(\"aws-sdk\"), require(\"url\"), require(\"sharp\"), require(\"ejs\"), require(\"mongoose\"), require(\"mongodb-uri\"), require(\"mime-types\"), require(\"https\"), require(\"http\"), require(\"deep-get-set\"), require(\"busboy\"));\n\telse\n\t\troot[\"@defualt/dev_env\"] = factory(root[\"path\"], root[\"webpack\"], root[\"yargs\"], root[\"express\"], root[\"fs-extra\"], root[\"child_process\"], root[\"babel-polyfill\"], root[\"fs\"], root[\"globby\"], root[\"webpack-node-externals\"], root[\"directory-named-webpack-plugin\"], root[\"single-line-log\"], root[\"cookie-parser\"], root[\"webpack-dev-middleware\"], root[\"webpack-hot-middleware\"], root[\"webpack-hot-server-middleware\"], root[\"rimraf\"], root[\"extract-css-chunks-webpack-plugin\"], root[\"autodll-webpack-plugin\"], root[\"write-file-webpack-plugin\"], root[\"stats-webpack-plugin\"], root[\"webpack/lib/ProgressPlugin\"], root[\"node-sass-json-importer\"], root[\"validate-npm-package-name\"], root[\"jquery-deferred\"], root[\"aws-sdk\"], root[\"url\"], root[\"sharp\"], root[\"ejs\"], root[\"mongoose\"], root[\"mongodb-uri\"], root[\"mime-types\"], root[\"https\"], root[\"http\"], root[\"deep-get-set\"], root[\"busboy\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_9__, __WEBPACK_EXTERNAL_MODULE_10__, __WEBPACK_EXTERNAL_MODULE_16__, __WEBPACK_EXTERNAL_MODULE_18__, __WEBPACK_EXTERNAL_MODULE_20__, __WEBPACK_EXTERNAL_MODULE_22__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_30__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_32__, __WEBPACK_EXTERNAL_MODULE_34__, __WEBPACK_EXTERNAL_MODULE_35__, __WEBPACK_EXTERNAL_MODULE_36__, __WEBPACK_EXTERNAL_MODULE_37__, __WEBPACK_EXTERNAL_MODULE_38__, __WEBPACK_EXTERNAL_MODULE_39__, __WEBPACK_EXTERNAL_MODULE_41__, __WEBPACK_EXTERNAL_MODULE_43__, __WEBPACK_EXTERNAL_MODULE_44__, __WEBPACK_EXTERNAL_MODULE_45__, __WEBPACK_EXTERNAL_MODULE_46__, __WEBPACK_EXTERNAL_MODULE_48__, __WEBPACK_EXTERNAL_MODULE_49__, __WEBPACK_EXTERNAL_MODULE_50__, __WEBPACK_EXTERNAL_MODULE_51__, __WEBPACK_EXTERNAL_MODULE_52__, __WEBPACK_EXTERNAL_MODULE_53__, __WEBPACK_EXTERNAL_MODULE_54__, __WEBPACK_EXTERNAL_MODULE_55__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"0\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] !== 0) {\n \t\t\tvar chunk = require(\"./\" + chunkId + \".js\");\n \t\t\tvar moreModules = chunk.modules, chunkIds = chunk.ids;\n \t\t\tfor(var moduleId in moreModules) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t\tfor(var i = 0; i < chunkIds.length; i++)\n \t\t\t\tinstalledChunks[chunkIds[i]] = 0;\n \t\t}\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// uncatched error handler for webpack runtime\n \t__webpack_require__.oe = function(err) {\n \t\tprocess.nextTick(function() {\n \t\t\tthrow err; // catch this error by using System.import().catch()\n \t\t});\n \t};\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 11);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 15e8249ffa7477f46194","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 0\n// module chunks = 2","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 1\n// module chunks = 2","module.exports = require(\"yargs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yargs\"\n// module id = 2\n// module chunks = 2","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 2","export default (processed) => {\n  console.log(processed.activeWebpackDevMiddleware);\n  return new Promise((resolve, reject) => {\n    const toUse = processed.activeWebpackDevMiddleware ? processed.activeWebpackDevMiddleware : processed;\n    toUse.run((err, stats) => {\n      console.log('RUN COMPILER');\n      if (err) {\n        console.error(err.stack || err);\n        if (err.details) {\n          console.error(err.details);\n        }\n        // return reject(err);\n      }\n\n      const info = stats.toJson();\n\n      if (stats.hasErrors()) {\n        info.errors.forEach((e) => {\n          console.error('\\x1b[31m', e, '\\x1b[0m');\n        });\n      }\n\n      if (stats.hasWarnings()) {\n        info.warnings.forEach((w) => {\n          console.warn('\\x1b[33m', w, '\\x1b[0m');\n        });\n      }\n      resolve(err, stats)\n    });\n  });\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackRunCompiler.js","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 5\n// module chunks = 2","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 6\n// module chunks = 2","import { argv } from 'yargs';\nimport fs from 'fs-extra';\nimport globby from 'globby';\nimport webpackEnhanceConfigNode from './core/webpackEnhanceConfigNode';\nimport webpackEnhanceBaseConfig from './core/webpackEnhanceBaseConfig';\n\n\nimport webpackEnhanceImmediateConfig from './core/webpackEnhanceImmediateConfig';\n\n\n\nfunction removeKeysWithEmptyVals(obj){\n  return Object.keys(obj).reduce((accum, key) => {\n    if (obj[key].length) {\n      accum[key] = obj[key];\n    }\n    return accum;\n  }, {})\n}\n\nfunction makeOutputSettingsFromFilePath(filePath) {\n  let output = filePath;\n  output = output.split('/');\n\n  output = {\n    filename: output.pop(),\n    path: output.join('/'),\n  };\n  return output;\n}\n\nfunction makeOutputFiles({libraryNameReduced,isBuild}) {\n  const outputFiles = {};\n  if (isBuild) {\n    outputFiles.library = `dist/${libraryNameReduced}`;\n    outputFiles.libraryMin = `dist/${libraryNameReduced}.min`;\n    outputFiles.demo = 'dist/demo/index';\n  } else {\n    outputFiles.demo = 'boot';\n    outputFiles.library = `${libraryNameReduced}`;\n  }\n  return outputFiles;\n}\n\nfunction makeEntry({libraryName,isBuild,dirRoot}) {\n  const libraryNameReduced = libraryName.split('/')[1] || libraryName.split('/')[0];\n  const outputFiles = makeOutputFiles({libraryNameReduced,isBuild});\n  return removeKeysWithEmptyVals(\n    argv['demo-entry']\n    ?\n    {\n      [outputFiles.demo]: [argv['demo-entry']],\n    }\n    :\n    {\n      MainApp: globby.sync([`${dirRoot}/packages/MainApp/demo.js`]),\n      [outputFiles.library]: globby.sync([\n        `${dirRoot}/${libraryNameReduced}.js`,\n        `${dirRoot}/src/library/index.js`,\n      ]),\n      ...(\n        outputFiles.libraryMin ? {\n          [outputFiles.libraryMin]: globby.sync([`${dirRoot}/src/library/index.js`]),\n        } : {}\n      ),\n      [outputFiles.demo]: globby.sync([\n        `${dirRoot}/*.demo.js`,\n        `${dirRoot}/demo.js`,\n        `${dirRoot}/**/*/*.demo.js`,\n        `${dirRoot}/**/*/demo.js`,\n        `!${dirRoot}/packages/**/*`,\n        `${dirRoot}/packages/MainApp/demo.js`,\n        `!${dirRoot}/node_modules/**/*`,\n      ]),\n    }\n  )\n}\n\nfunction generateConfigJson(options = {}) {\n  const isCommandLine = options.isCommandLine || argv.entry;\n  const isMocha = options.isMocha;\n  let config = webpackEnhanceBaseConfig();\n  if (isCommandLine) {\n    config = {\n      ...config,\n      entry: {\n        main: argv.entry,\n      },\n      output: makeOutputSettingsFromFilePath(argv.output),\n    };\n  } else if (!isMocha){\n    const isBuild = argv.env === 'build';\n    const dirRoot = argv.dirroot || process.cwd();\n    const packageJson = fs.readJsonSync(`${dirRoot}/package.json`);\n    \n    const libraryName = packageJson.name;\n    \n    config = {\n      ...config,\n      entry: makeEntry({libraryName,isBuild,dirRoot}),\n      output: {\n        path: `${dirRoot}`,\n        filename: '[name].js',\n        library: libraryName,\n        libraryTarget: 'umd',\n        umdNamedDefine: true,\n        publicPath: '/',\n        // publicPath: '/assets/',\n      },\n    };\n  }\n\n  config = webpackEnhanceConfigNode(config);\n\n  if (isCommandLine || isMocha) {\n    config = webpackEnhanceImmediateConfig(config);\n  }\n  // fs.writeFileSync('./_webpack-config-preview.json', JSON.stringify(config, null, 2));\n  return config;\n}\n\nexport default generateConfigJson;\n\n\n\n// WEBPACK FOOTER //\n// ./webpackConfig.js","const DirectoryNamedWebpackPlugin = require('directory-named-webpack-plugin');\nconst parseRequestResolvePlugin = require('./parseRequestResolvePlugin');\nconst path = require('path');\n\nvar basename = path.basename;\nvar inNodeModulesRE = /\\/node_modules\\/|\\\\node_modules\\\\/;\n\nfunction DirectoryDefaultFilePlugin() {\n  return {\n    apply(resolver) {\n      // I don't know why 'module' or 'resolve' are those values.\n      // Something to do with the the way they are used in this file:\n      // https://github.com/webpack/enhanced-resolve/blob/master/lib/ResolverFactory.js\n      // So they can be other values as seen in that file.\n      resolver.plugin('directory', function (req, done) {\n        // printProgress(`${request.request}`);\n        // console.log('request.request',request.request)\n        // const newRequestStr = parseRequest(req.request);\n        // if (newRequestStr && newRequestStr !== req.request) {\n        //   const obj = Object.assign({}, req, {\n        //     request: newRequestStr,\n        //   });\n        //   this.doResolve('resolve', obj, 'blah blah', done);\n        // } else {\n        //   // process.stdout.write(`\\n`);\n        //   done();\n        // }\n        \n\n        var directory = resolver.join(req.path, req.request);\n        if (directory.match(inNodeModulesRE)) {\n          return done();\n        }\n\n\n        resolver.fileSystem.stat(directory, function (err, stat) {\n          if (err || !stat || !stat.isDirectory()) {\n            return done();\n          }\n\n          var index = resolver.join(directory, 'index.js');          \n\n          resolver.fileSystem.stat(index, function (err, stat) {\n            // console.log('index',index);\n            \n            if (!err && stat && stat.isFile()) {\n              // ignore directories containing index.js files\n              return done();\n            }\n            // console.log(req)\n            // done();\n            console.log('new request',resolver.join(directory, basename(directory)));\n            const obj = Object.assign({}, req, {\n              request: resolver.join(directory, basename(directory)),\n            });\n            resolver.doResolve('resolve', obj, 'blah blah', done);\n\n            // resolver.doResolve('file', {\n            //   path: req.path,\n            //   query: req.query,\n            //   request: resolver.join(directory, basename(directory))\n            // }, function (err, result) {\n            //   return done(undefined, result || undefined);\n            // });\n          });\n        });\n      });\n    },\n  };\n}\n\nmodule.exports = {\n  resolve: {\n    modules: [\n      // '/Users/brianephraim/Sites/monorepo/node_modules',\n      path.resolve('./src/library'),\n      path.resolve(process.cwd(), 'packages'),\n      path.resolve(process.cwd(), '../../packages'),\n      'node_modules',\n      // path.resolve(process.cwd(), '../monorepo/node_modules'),\n      // '../monorepo/node_modules',\n    ],\n    extensions: [\n      '.js',\n      '.css',\n\n      // Why is this here? : https://github.com/npm/normalize-package-data/issues/88\n      // Issue only appeard when webpack run on command line for Node bundle\n      '.json',\n    ],\n    plugins: [\n      parseRequestResolvePlugin((requestStr) => {\n        // console.log('requestStr', requestStr);\n        if (requestStr.indexOf('@') === 0 && requestStr.indexOf('/') !== -1) {\n          const split = requestStr.split('/');\n          split.shift();\n          split.join('/');\n          // console.log('Afindme',split.join('/'),requestStr.split('/')[1]);\n          // console.log('Bfindme',requestStr.split('/')[1]);\n          return split.join('/');\n          return requestStr.split('/')[1];\n        }\n        return false;\n      }),\n      new DirectoryDefaultFilePlugin(),\n      // new DirectoryNamedWebpackPlugin(true),\n    ],\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpack-config-resolve.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 9\n// module chunks = 2","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 10\n// module chunks = 2","/* eslint-disable no-console */\nimport webpack from 'webpack';\nimport { argv } from 'yargs';\nimport shellCommand from './core/shellCommand';\nimport jestSpawnProcess from './jest/jestSpawnProcess';\nimport webpackRunCompiler from './core/webpackRunCompiler';\nimport webpackBuildCommandLine from './core/webpackBuildCommandLine';\nimport serveWebpack from './webpackExpressServer.js';\nimport webpackConfig from './webpackConfig'; \n// import isWithinMonoRepo from './core/isWithinMonoRepo');\n \nconst env = argv.env;\nconst item = argv.item;\n\nif (item) {\n  shellCommand(`(cd ./packages/${item} && npm run start)`);\n} else if (env === 'test') {\n  jestSpawnProcess(argv.testdevenv, argv.watch, argv.testPathPattern);\n} else if (argv.entry) {\n  webpackBuildCommandLine();\n} else if (env === 'build') {\n  webpackRunCompiler(webpack(webpackConfig()));  \n} else {\n  serveWebpack();\n}\nconst serve = function ()   {\n  serveWebpack.apply(this,arguments);\n}\nexport { serve };\n\n\n// WEBPACK FOOTER //\n// ./dev_env.js","/* eslint-disable global-require */\nmodule.exports = (commandToRun, options = { stdio: 'inherit' }, killParentOnExit = true) => {\n  const command = 'sh';\n  const args = [\n    '-c',\n    // commandToRun.replace('node $TMPFILE','node --inspect=9223 $TMPFILE'),\n    commandToRun,\n  ];\n  //\n  // kexec doesn't work in windows, so fallback to child_process.spawn\n  // this logic copied from babel-cli/lib/babel-node.js\n  // try {\n  //   const kexec = require('kexec');\n  //   kexec(command, args);\n  // } catch (err) {\n    // if (err.code !== 'MODULE_NOT_FOUND') throw err;\n\n  const childProcess = require('child_process');\n  const proc = childProcess.spawn(command, args, options || {});\n  proc.on('exit', (code, signal) => {\n    if (killParentOnExit) {\n      process.on('exit', () => {\n        if (signal) {\n          process.kill(process.pid, signal);\n        } else {\n          process.exit(code);\n        }\n      });\n    }\n  });\n  return proc;\n  // }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/shellCommand.js","/* eslint-disable camelcase */\nimport child_process from 'child_process';\nimport path from 'path';\n\n// import jestConfig from './jestConfig';\n// const config = `'${JSON.stringify(jestConfig).replace(/'/g, \"\\\\'\")}'`;\n\nconst configPath = `${__dirname}/jestConfig.js`;\n// const configBasePath = `${__dirname}/jestConfigBase.js`;\n// qwer();\n\nexport default (testdevenv, watch = true, testPathPattern) => {\n  const command = 'sh';\n  // Why `CI=true `? ----- https://github.com/facebook/jest/issues/2959\n  let commandBody = `CI=true ${process.cwd()}/node_modules/.bin/jest --watch=${watch && watch !== 'false' ? 'true' : 'false'} --config=${configPath}${testPathPattern ? [\" --testPathPattern='\",testPathPattern,\"'\"].join('') : ''}`;\n  if (testdevenv) {\n    // commandBody = `CI=true ${process.cwd()}/node_modules/.bin/jest -t testdevenv --config=${configBasePath}`;\n    // commandBody = `CI=true ${process.cwd()}/node_modules/.bin/jest ${__dirname}/testdevenv.js  --config=${configBasePath}`;\n    commandBody = `CI=true ${process.cwd()}/node_modules/.bin/mocha-webpack --colors --require babel-core/register --webpack-config ${path.resolve(__dirname, '../core/webpackConfigMocha.js')} \\\"${path.resolve(__dirname, './testdevenv2.js')}\\\" --require source-map-support/register`;\n  }\n  const args = [\n    '-c',\n    commandBody,\n  ];\n  const proc = child_process.spawn(command, args, { stdio: 'inherit' });\n  proc.on('exit', (code, signal) => {\n    process.on('exit', () => {\n      if (signal) {\n        process.kill(process.pid, signal);\n      } else {\n        process.exit(code);\n      }\n    });\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./jest/jestSpawnProcess.js","import webpack from 'webpack';\nimport webpackRunCompiler from './webpackRunCompiler';\nimport webpackConfig from '../webpackConfig';\n\nexport default () => {\n  webpackRunCompiler(webpack(webpackConfig({isCommandLine: true})));\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackBuildCommandLine.js","module.exports = require(\"globby\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"globby\"\n// module id = 16\n// module chunks = 2","/* eslint-disable no-mixed-operators */\nimport webpack from 'webpack';\nimport nodeExternals from 'webpack-node-externals';\nimport path from 'path';\n\nfunction enhance(originalConfig) {\n  const module = { ...(originalConfig && originalConfig.module) };\n  module.rules = [\n    { test: /rx\\.lite\\.aggregates\\.js/, use: 'imports-loader?define=>false' },\n    { test: /async\\.js/, use: 'imports-loader?define=>false' },\n    ...(module.rules || []),\n  ];\n\n  const plugins = originalConfig.plugins || [];\n  plugins.push(new webpack.BannerPlugin({\n    banner: 'require(\"source-map-support\").install();',\n    raw: true,\n    entryOnly: false,\n  }));\n\n  const config = {\n    ...originalConfig,\n    // devtool: 'cheap-module-eval-source-map',\n    // devtool: 'cheap-source-map',\n    // devtool: 'cheap-eval-source-map',\n    // devtool: 'source-map',\n    // devtool: 'inline-source-map',\n    devtool: 'sourcemap',\n    // devtool: 'eval',\n    module,\n    target: 'node',\n    node: {\n      ...originalConfig.node,\n      __dirname: false,\n      __filename: false,\n    },\n    externals: [\n      ...(originalConfig.externals || []),\n      nodeExternals({\n        // modulesFromFile: true,\n        modulesDir: path.resolve(__dirname.split('/packages/dev_env')[0], './node_modules'),\n      }),\n    ],\n    plugins,\n\n  };\n  return config;\n}\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackEnhanceConfigNode.js","module.exports = require(\"webpack-node-externals\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-node-externals\"\n// module id = 18\n// module chunks = 2","import webpackConfigResolve from './webpack-config-resolve';\n\nfunction enhance(originalConfig) {\n  const config = {\n    module: {\n      rules: [\n        {\n          test: /\\.(js)?$/,\n          loader: 'babel-loader',\n          exclude: /(node_modules|\\.tmp)/,\n          // include: `${dirRoot}`,\n          // options: {\n          //   presets: [\n\n          //     [\n          //       'es2015',\n          //       // needed for tree shaking\n          //       { modules: false },\n          //     ],\n          //     'react',\n          //     // 'react',\n          //   ],\n          //   plugins: [\n          //     'transform-es2015-spread',\n          //     'transform-object-rest-spread',\n          //   ],\n          //   // mocha needs .babelrc,\n          //   // and .babelrc cannot use the above config\n          //   // so ignore .babelrc here\n          //   babelrc: false,\n          // },\n        },\n      ],\n    },\n    resolve: webpackConfigResolve.resolve,\n  };\n  return {\n    ...originalConfig,\n    ...config,\n  };\n}\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackEnhanceBaseConfig.js","module.exports = require(\"directory-named-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"directory-named-webpack-plugin\"\n// module id = 20\n// module chunks = 2","/* eslint-disable func-names */\nconst singleLineLog = require('single-line-log').stdout;\n\nfunction printProgress(progress) {\n  if (!process || !process.stdout || !process.stdout.clearLine) {\n    return;\n  }\n  singleLineLog(`Resolving: ${progress}\\n`);\n  // process.stdout.clearLine();\n  // process.stdout.cursorTo(0);\n  // process.stdout.write(progress + `-xxxxxx`);\n}\nfunction parseRequestResolvePlugin(parseRequest = () => {}) {\n  return {\n    apply(resolver) {\n      // I don't know why 'module' or 'resolve' are those values.\n      // Something to do with the the way they are used in this file:\n      // https://github.com/webpack/enhanced-resolve/blob/master/lib/ResolverFactory.js\n      // So they can be other values as seen in that file.\n      resolver.plugin(/* 'modules'*/ 'resolve', function (request, callback) {\n        printProgress(`${request.request}`);\n        // console.log('request.request',request.request)\n        const newRequestStr = parseRequest(request.request);\n        if (newRequestStr && newRequestStr !== request.request) {\n          const obj = Object.assign({}, request, {\n            request: newRequestStr,\n          });\n          this.doResolve('resolve', obj, 'blah blah', callback);\n        } else {\n          // process.stdout.write(`\\n`);\n          callback();\n        }\n      });\n    },\n  };\n}\n\nmodule.exports = parseRequestResolvePlugin;\n\n\n\n// WEBPACK FOOTER //\n// ./core/parseRequestResolvePlugin.js","module.exports = require(\"single-line-log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"single-line-log\"\n// module id = 22\n// module chunks = 2","\nfunction enhance(originalConfig) {\n  const config = { ...originalConfig };\n  config.plugins = config.plugins || [];\n\n  // I needed __dirname hardcoded as the original dirname\n  // https://github.com/webpack/webpack/issues/1599#issuecomment-266588898\n  config.plugins.push({\n    apply(compiler) {\n      function setModuleConstant(expressionName, fn) {\n        compiler.plugin('compilation', (compilation, data) => {\n          data.normalModuleFactory.plugin('parser', (parser) => {\n            parser.plugin(`expression ${expressionName}`, function compilerParserPlugin() {\n              this.state.current.addVariable(expressionName, JSON.stringify(fn(this.state.module)));\n              return true;\n            });\n          });\n        });\n      }\n\n      setModuleConstant('__filename', (module) => {\n        return module.resource;\n      });\n\n      setModuleConstant('__dirname', (module) => {\n        return module.context;\n      });\n    },\n  });\n  return config;\n}\n\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackEnhanceImmediateConfig.js","/* eslint-disable no-console */\n\nimport express from 'express';\nimport { argv } from 'yargs';\nimport demoEndpoints from './universal/server/demoEndpoints';\nimport startUniversalExpress from './startUniversalExpress';\n\nfunction startWebpack(app) {\n  console.log('SERVE');\n  // This module either extends an existing express app\n  // or creates a new express app\n\n\n  demoEndpoints({app})\n  startUniversalExpress({app});\n\n  app.use('/images', express.static('packages/images'));\n  app.use('/fonts', express.static('packages/fonts'));\n\n  const port = 3000;\n  app.listen(port, (error) => {\n    if (error) {\n      console.error(error);\n    } else {\n      console.info(\n        '🌎 Listening on port %s. Open up http://localhost:%s/ in your browser.',\n        port,\n        port,\n      );\n    }\n  });\n\n  return app;\n}\n\n\nfunction asyncRecurseStartApps(app,serverNamespaces) {\n  return new Promise((resolve, reject) => {\n    let i = 0;\n    function recurse(backendAppNamespace) {\n      System.import(`../../packages/${backendAppNamespace}/${backendAppNamespace}.express`).then((someBackendApp) => {\n        const serveBackendApp = someBackendApp.default;\n        const backendAppSettings = {\n          nameSpace: backendAppNamespace,\n        };\n        backendAppSettings.app = app;\n        serveBackendApp(backendAppSettings);\n        const nextNamespace = serverNamespaces[++i];\n        if (nextNamespace) {\n          recurse(nextNamespace);\n        } else {\n          resolve(app);\n        }\n      });\n    }\n    recurse(serverNamespaces[i]);\n  });  \n}\n\nexport default function () {\n  const serverNamespaces = argv.servers && argv.servers.split(',');\n  const app = express();\n  if (serverNamespaces) {\n    asyncRecurseStartApps(app,serverNamespaces).then(startWebpack);\n  } else {\n    startWebpack(app)\n  }\n}\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./webpackExpressServer.js","import 'babel-polyfill'\nimport express from 'express'\nimport cookieParser from 'cookie-parser'\nimport { findVideos, findVideo } from './api'\n// import startUniversalExpress from '../../startUniversalExpress';\n\nexport default function demoExpress({app = express()}) {\n  // JWTOKEN COOKIE - in a real app obviously you set this after signup/login:\n\n  app.use(cookieParser())\n\n  app.use((req, res, next) => {\n    const cookie = req.cookies.jwToken\n    const jwToken = 'fake' // TRY: set to 'real' to authenticate ADMIN route\n\n    if (cookie !== jwToken) {\n      res.cookie('jwToken', jwToken, { maxAge: 900000 })\n      req.cookies.jwToken = jwToken\n    }\n\n    next()\n  })\n\n  // API\n\n  app.get('/api/videos/:category', async (req, res) => {\n    const jwToken = req.headers.authorization.split(' ')[1]\n    const data = await findVideos(req.params.category, jwToken)\n    res.json(data)\n  })\n\n  app.get('/api/video/:slug', async (req, res) => {\n    const jwToken = req.headers.authorization.split(' ')[1]\n    const data = await findVideo(req.params.slug, jwToken)\n    res.json(data)\n  })\n}\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./universal/server/demoEndpoints.js","module.exports = require(\"cookie-parser\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cookie-parser\"\n// module id = 26\n// module chunks = 2","export const findVideos = async (category, jwToken) => {\n  await fakeDelay(1000)\n  if (!jwToken) return [] // in a real app, you'd authenticate\n\n  switch (category) {\n    case 'fp':\n      return fpVideos\n    case 'react-redux':\n      return reactReduxVideos\n    case 'db-graphql':\n      return dbGraphqlVideos\n    default:\n      return []\n  }\n}\n\nexport const findVideo = async (slug, jwToken) => {\n  await fakeDelay(500)\n  if (!jwToken) return null // TRY: set the cookie === ''\n\n  return allVideos.find(video => video.slug === slug)\n}\n\nconst fakeDelay = (ms = 1000) => new Promise(res => setTimeout(res, ms))\n\nconst fpVideos = [\n  {\n    youtubeId: '6mTbuzafcII',\n    slug: 'transducers',\n    title: 'Transducers',\n    by: 'Rich Hickey',\n    category: 'Functional Programming',\n    color: 'blue',\n    tip: `Redux-First Router does not require you to embed actual links into the page \n            to get the benefit of a synced address bar. Regular actions if matched\n            will change the URL. That makes it easy to apply to an existing SPA Redux\n            lacking in routing/URLs!`\n  },\n  {\n    youtubeId: 'zBHB9i8e3Kc',\n    slug: 'introduction-to-elm',\n    title: 'Introduction to Elm',\n    by: 'Richard Feldman',\n    category: 'Functional Programming',\n    color: 'blue',\n    tip: `Redux reducers programmatically allow you to produce any state you need.\n          So logically Route Matching components such as in React Reacter only\n          allow you to do LESS, but with a MORE complicated API.`\n  },\n  {\n    youtubeId: 'mty0RwkPmE8',\n    slug: 'next-five-years-of-clojurescript',\n    title: 'The Next Five Years of ClojureScript ',\n    by: 'David Nolen',\n    category: 'Functional Programming',\n    color: 'blue',\n    tip: `In your actions.meta.location key passed to your reducers you have all sorts\n          of information: the previous route, its type and payload, history, whether\n          the browser back/next buttons were used and if the action was dispatched on load.\n          Check the \"kind\" key.`\n  }\n]\n\nconst reactReduxVideos = [\n  {\n    youtubeId: 'qa72q70gAb4',\n    slug: 'unraveling-navigation-in-react-native',\n    title: 'Unraveling Navigation in React Native',\n    by: 'Adam Miskiewicz',\n    category: 'React & Redux',\n    color: 'red',\n    tip: `Redux-First Router tries in all cases to mirror the Redux API. There is no need\n          to pass your thunk :params such as in an express request or the like. Just grab it\n          from the payload stored in the location state.`\n  },\n  {\n    youtubeId: 'zD_judE-bXk',\n    slug: 'recomposing-your-react-application',\n    title: 'Recomposing your React application at react-europe ',\n    by: 'Andrew Clark',\n    category: 'React & Redux',\n    color: 'red',\n    tip: `Redux-First Router requires your payload to be objects, as its keys are directionally extracted\n          and from your URLs and passed from payloads to URL path segments. Your free\n          to use whatever payload you like for redux actions not connected to your routes. Not all\n          actions need to be connected to routes.`\n  },\n  {\n    youtubeId: 'uvAXVMwHJXU',\n    slug: 'the-redux-journey',\n    title: 'The Redux Journey',\n    by: 'Dan Abramov',\n    category: 'React & Redux',\n    color: 'red',\n    tip: `The <Link /> component embeds paths in hrefs for SEO, but you don't need to use it\n          to get the benefits of a changing address bar. Actions that match routes will\n          trigger the corresponding URL even if you dispatch them directly.`\n  }\n]\n\nconst dbGraphqlVideos = [\n  {\n    youtubeId: 'fU9hR3kiOK0',\n    slug: 'turning-the-db-inside-out',\n    title: 'Turning the database inside out',\n    by: 'Martin Kleppmann',\n    category: 'Database & GraphQL',\n    color: 'orange',\n    tip: `The 'thunk' feature is optional, but very useful. Using our 'thunk' feature allows you\n          to define it in one place while linking to the route from many places without\n          worrying about getting the data first. It's also very easy to handle server-side.`\n  },\n  {\n    youtubeId: '_5VShOmnfQ0',\n    slug: 'normalized-caching-in-apollo-ios',\n    title: 'Normalized Caching in Apollo iOS',\n    by: 'Martijn Walraven',\n    category: 'Database & GraphQL',\n    color: 'orange',\n    tip: `Structure your reducers so that less actions are used to trigger the same state. \n          Your actions will become more 'page-like'. As a result your reducers\n          will need to do more \"tear down\" work when leaving corresponding pages. It's also\n          recommended to set action types as the capitalized noun name of the page.`\n  },\n  {\n    youtubeId: 'm-hre1tt9C4',\n    slug: 'first-thoughts-on-apollo-and-graphql',\n    title: 'First Thoughts On Apollo and GraphQL',\n    by: 'Sacha Greif',\n    category: 'Database & GraphQL',\n    color: 'orange',\n    tip: `Using a hash of slugs within one of your reducers is the recommended approach to \n          maintain a normalized set of entities to get the benefits of SEO. This is as opposed\n          to using IDs. Refrain from using normalizr or Apollo until your app justifies it.`\n  }\n]\n\nconst allVideos = reactReduxVideos.concat(dbGraphqlVideos, fpVideos)\n\n\n\n// WEBPACK FOOTER //\n// ./universal/server/api.js","import 'babel-polyfill'\nimport webpack from 'webpack'\nimport webpackDevMiddleware from 'webpack-dev-middleware'\n\nimport express from 'express'\nimport fs from 'fs-extra';\n\nimport webpackHotMiddleware from 'webpack-hot-middleware'\nimport webpackHotServerMiddleware from 'webpack-hot-server-middleware'\nimport { argv } from 'yargs';\nimport path from 'path';\nimport deleteFiles from 'rimraf';\nimport universalWebpackConfig from './universal/webpack/universalWebpackConfig';\nimport webpackRunCompiler from './core/webpackRunCompiler';\nimport webpackParseStatsForDepProblems from './webpackParseStatsForDepProblems';\n\n\nconst res = p => path.resolve(__dirname, p)\n\nexport default function startUniversal({app = express()}) {\n  const clientDevConfig = universalWebpackConfig({isClient:true,isDev:true,isUniversal:true});\n  const serverDevConfig = universalWebpackConfig({isClient:false,isDev:true,isUniversal:true});\n  const serverNonUniversalConfig = universalWebpackConfig({isClient:false,isDev:true,isUniversal:false});\n  const publicPath = clientDevConfig.output.publicPath\n  const outputPath = clientDevConfig.output.path\n\n  // UNIVERSAL HMR + STATS HANDLING GOODNESS:\n\n  if (argv.isDev === 'true') {\n    function invalidHandler(fileName, changeTime) {\n      console.log('==== INVALIDATED ====')\n      console.log('stats', fs.statSync(fileName));\n      console.log(`FileName: ${fileName}`);\n      console.log(`ChangeTimex: ${changeTime}`);\n    }\n    const options = {\n      publicPath,\n      stats: {\n        colors: true,\n      },\n    };\n    const isUniversal = argv.isUniversal === 'true';\n    const multiCompiler = webpack([clientDevConfig, isUniversal ? serverDevConfig : serverNonUniversalConfig])\n    const clientCompiler = multiCompiler.compilers[0]\n    console.info('🔷 Starting webpack ...');\n\n    clientCompiler.plugin('invalid', invalidHandler);\n    const activeWebpackDevMiddleware = webpackDevMiddleware(multiCompiler, options);\n    console.log(activeWebpackDevMiddleware);\n    activeWebpackDevMiddleware.waitUntilValid((stats) => {\n      // function censor(censor) {\n      //   var i = 0;\n\n      //   return function(key, value) {\n      //     if(i !== 0 && typeof(censor) === 'object' && typeof(value) == 'object' && censor == value) \n      //       return '[Circular]'; \n\n      //     if(i >= 29) // seems to be a harded maximum of 30 serialized objects?\n      //       return '[Unknown]';\n\n      //     ++i; // so we know we aren't using the original object anymore\n\n      //     return value;  \n      //   }\n      // }\n      // fs.writeFileSync('./activeWebpackDevMiddlewareStats.json', JSON.stringify(stats, censor(stats), 2));\n      webpackParseStatsForDepProblems(stats);\n    });\n\n    app.use(activeWebpackDevMiddleware)\n    app.use(webpackHotMiddleware(clientCompiler))\n    app.use(\n      // keeps serverRender updated with arg: { clientStats, outputPath }\n      webpackHotServerMiddleware(multiCompiler, {\n        serverRendererOptions: { outputPath }\n      })\n    )\n\n  }\n  else {\n    console.log('I GUESS ITS PROD',process.env.NODE_ENV)\n    const clientProdConfig = universalWebpackConfig({isClient:true,isDev:false,isUniversal:true});\n    const serverProdConfig = universalWebpackConfig({isClient:false,isDev:false,isUniversal:true});\n    deleteFiles(`{${clientProdConfig.output.path},${serverProdConfig.output.path}}`, () => {\n      // webpackRunCompiler(webpack(clientProdConfig)).then(() => {\n        // deleteFiles(serverProdConfig.output.path, () => {\n          const multiCompiler = webpack([clientProdConfig,serverProdConfig]);\n          const clientCompiler = multiCompiler.compilers[0];\n          const serverCompiler = multiCompiler.compilers[1];\n          webpackRunCompiler(multiCompiler).then(() => {\n            const clientConfig = universalWebpackConfig({isClient:true,isDev:true,isUniversal:true});\n            const publicPath = clientConfig.output.publicPath\n            const outputPath = clientConfig.output.path\n            const serverRender = __non_webpack_require__(res('./universal/buildServer/main.js')).default\n            const clientStats = __non_webpack_require__(res('./universal/buildClient/stats.json'))            \n            app.use(publicPath, express.static(outputPath))\n            app.use(serverRender({ clientStats, outputPath }))\n          });\n        // });\n      // });\n    });\n  }\n\n  return app;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./startUniversalExpress.js","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 29\n// module chunks = 2","module.exports = require(\"webpack-hot-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-middleware\"\n// module id = 30\n// module chunks = 2","module.exports = require(\"webpack-hot-server-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-hot-server-middleware\"\n// module id = 31\n// module chunks = 2","module.exports = require(\"rimraf\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"rimraf\"\n// module id = 32\n// module chunks = 2","// ----- client dev\nconst path = require('path')\nconst webpack = require('webpack')\nconst ExtractCssChunks = require('extract-css-chunks-webpack-plugin')\nconst AutoDllPlugin = require('autodll-webpack-plugin')\nconst WriteFilePlugin = require('write-file-webpack-plugin')\nconst resolve2 = require('../../core/webpack-config-resolve')\nconst StatsPlugin = require('stats-webpack-plugin')\nconst ProgressPlugin = require('webpack/lib/ProgressPlugin')\nconst jsonImporter = require('node-sass-json-importer');\n\nconst makeProgressPlugin = () => {\n  return new ProgressPlugin(function (percentage, msg, current, active, modulepath) {\n    if (process.stdout.isTTY && percentage < 1) {\n      process.stdout.cursorTo(0)\n      modulepath = modulepath ? ' …' + modulepath.substr(modulepath.length - 30) : ''\n      current = current ? ' ' + current : ''\n      active = active ? ' ' + active : ''\n      process.stdout.write((percentage * 100).toFixed(0) + '% ' + msg + current + active + modulepath + ' ')\n      process.stdout.clearLine(1)\n    } else if (percentage === 1) {\n      process.stdout.write('\\n')\n      console.log('webpack: done.')\n    }\n  })\n};\n\n// ----- server dev\nconst fs = require('fs')\n// const path = require('path')\n// const webpack = require('webpack')\n// const resolve2 = require('../../core/webpack-config-resolve')\n\n// ----- server dev\nconst res = p => path.resolve(__dirname, p)\n\n// if you're specifying externals to leave unbundled, you need to tell Webpack\n// to still bundle `react-universal-component`, `webpack-flush-chunks` and\n// `require-universal-module` so that they know they are running\n// within Webpack and can properly make connections to client modules:\nconst externals = fs\n  .readdirSync(res('../../../../node_modules'))\n  .filter(\n    x =>\n      !/\\.bin|react-universal-component|require-universal-module|webpack-flush-chunks/.test(\n        x\n      )\n  )\n  .reduce((externals, mod) => {\n    externals[mod] = `commonjs ${mod}`\n    return externals\n  }, {})\n\n\n/* eslint-disable no-nested-ternary */\nmodule.exports = ({isClient = false, isDev = false, isUniversal = false}) => {\n  return {\n    name: isClient ? 'client' : 'server',\n    target: isClient ? 'web' : 'node',\n    devtool: 'source-map',\n    // devtool: 'eval',\n    entry: [\n      ...(!isClient && !isDev ? [] : ['babel-polyfill']), // not sure why non babel-polyfill when server-prod\n      'fetch-everywhere',\n      ...(\n        isClient &&  isDev ? [\n        'webpack-hot-middleware/client?path=/__webpack_hmr&timeout=20000&reload=false&quiet=false&noInfo=false',\n        'react-hot-loader/patch',\n        ] : []\n      ),\n      path.resolve(__dirname,\n        isClient\n        ?\n        '../src/clientRender.js'\n        :\n        (\n          isUniversal\n          ?\n          '../server/render.js'\n          :\n          '../server/nonUniversalRender.js'\n        )\n      )\n    ],\n    ...(!isClient ? {externals} : {}),\n    output: {\n      path: res(isClient ? '../buildClient' : '../buildServer'),\n      filename: isClient && !isDev ? '[name].[chunkhash].js' : '[name].js',\n      publicPath: '/static/',\n      ...(\n        isClient\n        ?\n        {chunkFilename: isDev ? '[name].js' : '[name].[chunkhash].js'}\n        :\n        {libraryTarget: 'commonjs2'}\n      ),      \n    },\n    module: {\n      rules: [\n        {\n          test: /\\.js$/,\n          exclude: /node_modules/,\n          use: 'babel-loader'\n        },\n        ...(\n          isClient\n          ?\n          [\n            {\n              test: /\\.css$/,\n              use: ExtractCssChunks.extract({\n                use: {\n                  loader: 'css-loader',\n                  options: {\n                    modules: true,\n                    localIdentName: '[name]__[local]--[hash:base64:5]'\n                  }\n                }\n              })\n            },\n            {\n              test: /\\.scss$/,\n              use: ExtractCssChunks.extract({\n                use: [\n                  'css-loader?sourceMap',\n                  {\n                    loader: 'sass-loader?sourceMap',\n                    options: {\n                      importer: jsonImporter,\n                      modules: true,\n                      localIdentName: '[name]__[local]--[hash:base64:5]'\n                    }\n                  }\n                ]\n              })\n            },\n          ]\n          :\n          [\n            {\n              test: /\\.css$/,\n              exclude: /node_modules/,\n              use: {\n                loader: 'css-loader/locals',\n                options: {\n                  modules: true,\n                  localIdentName: '[name]__[local]--[hash:base64:5]'\n                }\n              }\n            },\n            {\n              test: /\\.scss$/,\n              exclude: /node_modules/,\n              use: [\n                'css-loader?sourceMap',\n                {\n                  loader: 'sass-loader?sourceMap',\n                  options: {\n                    importer: jsonImporter,\n                    modules: true,\n                    localIdentName: '[name]__[local]--[hash:base64:5]'\n                  }\n                }\n              ]\n            }\n          ]\n        ),\n      ]\n    },\n    resolve: resolve2.resolve,\n    plugins: isClient\n      ?\n      [\n        (\n          isDev \n            ?\n            new WriteFilePlugin() // used so you can see what chunks are produced in dev\n            :\n            new StatsPlugin('stats.json')\n        ), \n        new ExtractCssChunks(),\n        new webpack.optimize.CommonsChunkPlugin({\n          names: ['bootstrap'], // needed to put webpack bootstrap code before chunks\n          filename: isDev ? '[name].js' : '[name].[chunkhash].js',\n          minChunks: Infinity\n        }),\n        ...(\n          isDev\n            ?\n            [\n              new webpack.HotModuleReplacementPlugin(),\n              new webpack.NoEmitOnErrorsPlugin(),\n            ]\n            :\n            []\n        ),\n        new webpack.DefinePlugin({\n          'process.env': {\n            NODE_ENV: JSON.stringify(isDev ? 'development' : 'production')\n          }\n        }),\n        ...(\n          !isDev\n            ?\n            [\n              new webpack.optimize.UglifyJsPlugin({\n                compress: {\n                  screw_ie8: true,\n                  warnings: false\n                },\n                mangle: {\n                  screw_ie8: true\n                },\n                output: {\n                  screw_ie8: true,\n                  comments: false\n                },\n                sourceMap: true\n              }),\n              new webpack.HashedModuleIdsPlugin(), // not needed for strategy to work (just good practice)\n            ]\n            :\n            []\n        ),\n        new AutoDllPlugin({\n          context: path.join(__dirname, '..'),\n          filename: '[name].js',\n          entry: {\n            vendor: [\n              'react',\n              'react-dom',\n              'react-redux',\n              'redux',\n              'history/createBrowserHistory',\n              'transition-group',\n              'redux-first-router',\n              'redux-first-router-link',\n              'fetch-everywhere',\n              'babel-polyfill',\n              'redux-devtools-extension/logOnlyInProduction'\n            ]\n          }\n        }),\n        makeProgressPlugin()\n      ]\n      :\n      // IS SERVER\n      [\n        new webpack.optimize.LimitChunkCountPlugin({\n          maxChunks: 1\n        }),\n\n        new webpack.DefinePlugin({\n          'process.env': {\n            NODE_ENV: JSON.stringify(isDev ? 'development' : 'production')\n          }\n        }),\n        makeProgressPlugin()\n      ]\n  };\n\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./universal/webpack/universalWebpackConfig.js","module.exports = require(\"extract-css-chunks-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-css-chunks-webpack-plugin\"\n// module id = 34\n// module chunks = 2","module.exports = require(\"autodll-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"autodll-webpack-plugin\"\n// module id = 35\n// module chunks = 2","module.exports = require(\"write-file-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"write-file-webpack-plugin\"\n// module id = 36\n// module chunks = 2","module.exports = require(\"stats-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"stats-webpack-plugin\"\n// module id = 37\n// module chunks = 2","module.exports = require(\"webpack/lib/ProgressPlugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack/lib/ProgressPlugin\"\n// module id = 38\n// module chunks = 2","module.exports = require(\"node-sass-json-importer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-sass-json-importer\"\n// module id = 39\n// module chunks = 2","/* eslint-disable no-console */\nimport fs from 'fs-extra';\nimport validateNpmPackageName from 'validate-npm-package-name';\n\nfunction ensureTrailingSlash(str) {\n  return str.replace(/\\/?$/, '/');\n}\n\nfunction ensureReadJsonSync(packageDotJsonPath) {\n  let packageDotJsonContent;\n  try {\n    packageDotJsonContent = fs.readJsonSync(packageDotJsonPath);\n  } catch (e) {\n    packageDotJsonContent = {};\n  }\n  return packageDotJsonContent;\n}\n\nfunction showProblemsInConsole(problems) {\n  if (Object.keys(problems).length) {\n    console.info('\\x1b[1m', '\\nProblems with dependencies', '\\x1b[0m');\n  }\n  Object.keys(problems).forEach((moduleResource) => {\n    console.info('\\x1b[36m', '\\nProblem in module with `import` statement:', '\\x1b[0m');\n    console.info('\\x1b[37m', ` ${moduleResource}`, '\\x1b[0m');\n    Object.keys(problems[moduleResource]).forEach((depName) => {\n      const problemMsg = problems[moduleResource][depName].msg;\n      console.info('\\x1b[33m', 'Dependency requested as:', '\\x1b[0m');\n      console.info('\\x1b[37m', ` ${depName}`, '\\x1b[0m');\n      console.info('\\x1b[33m', `Message: ${problemMsg}`, '\\x1b[0m');\n      const problemInfo = problems[moduleResource][depName].info;\n      if (problemInfo) {\n        console.info('\\x1b[37m', `- ${problemInfo.join('\\n - ')}`, '\\x1b[0m');\n      }\n    });\n  });\n}\n\nfunction findDependenciesProblems(dependencies, packageDotJsonContent) {\n  const problems = {};\n\n  dependencies.forEach((dep) => {\n    if (dep.module) {\n      const rawRequest = dep.module.rawRequest;\n      // if (rawRequest.indexOf('/Users/brianephraim/Sites/monorepo/packages') === 0) {\n      //   console.info('\\x1b[33m', 'depWTF', rawRequest, '\\x1b[0m');\n      //   console.log('depWTF', dep);\n      // } else {\n      //   console.info('\\x1b[33m', 'depGGG', rawRequest, '\\x1b[0m');\n      //   console.log('depGGG', dep);\n      // }\n\n      // not a relative dependency\n      // not an absolut dependency\n      // we are only concerned with depenencies referenced like\n      // `import asdf from 'asdf';`\n      // or\n      // `import qwer from 'asdf/qwer';``\n      // or\n      // `import asdf from '@defualt/asdf';``\n      // These dependencies will be either in /node_modules/ or /packages/,\n      // the latter for only monorepo use.\n      if (rawRequest && rawRequest.indexOf('.') !== 0 && rawRequest.indexOf('/') !== 0) {\n        const validationResult = validateNpmPackageName(rawRequest);\n        if (validationResult.validForNewPackages) {\n          if (\n            !packageDotJsonContent ||\n            (\n              (\n                !packageDotJsonContent.dependencies ||\n                !packageDotJsonContent.dependencies[rawRequest]\n              ) &&\n              (\n                !packageDotJsonContent.devDependencies ||\n                !packageDotJsonContent.devDependencies[rawRequest]\n              )\n            )\n          ) {\n            problems[rawRequest] = { msg: 'MISSING FROM PACKAGE.JSON' };\n          }\n        } else {\n          const info = [\n            ...validationResult.warnings || [], ...validationResult.errors || [],\n          ].filter((msg) => {\n            return msg !== 'name can only contain URL-friendly characters';\n          });\n          // console.log(validationResult);\n          if (info.length) {\n            problems[rawRequest] = {\n              msg: 'BAD FORMATTING',\n              info: [...validationResult.warnings || [], ...validationResult.errors || []],\n            };\n          }\n        }\n      }\n    }\n  });\n\n  return Object.keys(problems).length ? problems : null;\n}\n\nfunction webpackParseStatsForDepProblems(stats, shouldShowProblemsInConsole = true) {\n  const isMonorepo = fs.existsSync(`${process.cwd()}/packages`);\n\n  const packageDotJsonCache = {};\n  const problems = {};\n  const compilation = stats.compilation ? stats.compilation : stats.stats[0].compilation\n  compilation.modules.forEach((module) => {\n    // only concerned with module entries from /packages/ folder (not node_modules)\n    if (\n      module.resource &&\n      module.resource.indexOf('node_modules') === -1\n    ) {\n      let packageDotJsonPath;\n      if (isMonorepo) {\n        let packagesDir = `${process.cwd()}/packages`;\n        packagesDir = ensureTrailingSlash(packagesDir);\n        // get substring from first trailing slash after whatever packagesDir is\n        console.log(module.resource);\n        const packageFolderName = module.resource.split(packagesDir)[1].split('/')[0];\n        packageDotJsonPath = `${packagesDir}${packageFolderName}/package.json`;\n      } else {\n        packageDotJsonPath = `${process.cwd()}/package.json`;\n      }\n\n      const packageDotJsonContent = (\n        packageDotJsonCache[packageDotJsonPath] || ensureReadJsonSync(packageDotJsonPath)\n      );\n      packageDotJsonCache[packageDotJsonPath] = packageDotJsonContent;\n\n      const packageSomehowPublic = (\n        !packageDotJsonContent.private ||\n        !packageDotJsonContent.privateFromGithub\n      );\n\n      // only concerned if module's package.json is not empty,\n      // and if it is public on either NPM or Girhub\n      if (Object.keys(packageDotJsonContent).length && packageSomehowPublic) {\n        const depProblems = findDependenciesProblems(module.dependencies, packageDotJsonContent);\n        if (depProblems) {\n          problems[module.resource] = depProblems;\n        }\n      }\n    }\n  });\n  if (Object.keys(problems).length > 0 && shouldShowProblemsInConsole) {\n    showProblemsInConsole(problems);\n  }\n\n  return problems;\n}\n\nexport default webpackParseStatsForDepProblems;\n\n\n\n// WEBPACK FOOTER //\n// ./webpackParseStatsForDepProblems.js","module.exports = require(\"validate-npm-package-name\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"validate-npm-package-name\"\n// module id = 41\n// module chunks = 2","var map = {\n\t\"./bernieserver/bernieserver.express\": [\n\t\t47,\n\t\t0\n\t],\n\t\"./junk-express/junk-express.express\": [\n\t\t56,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 42;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// .. lazy ^\\.\\/.*\\.express$\n// module id = 42\n// module chunks = 2","module.exports = require(\"jquery-deferred\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery-deferred\"\n// module id = 43\n// module chunks = 2","module.exports = require(\"aws-sdk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-sdk\"\n// module id = 44\n// module chunks = 2","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 45\n// module chunks = 2","module.exports = require(\"sharp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sharp\"\n// module id = 46\n// module chunks = 2","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 48\n// module chunks = 2","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 49\n// module chunks = 2","module.exports = require(\"mongodb-uri\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb-uri\"\n// module id = 50\n// module chunks = 2","module.exports = require(\"mime-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mime-types\"\n// module id = 51\n// module chunks = 2","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 52\n// module chunks = 2","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 53\n// module chunks = 2","module.exports = require(\"deep-get-set\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"deep-get-set\"\n// module id = 54\n// module chunks = 2","module.exports = require(\"busboy\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"busboy\"\n// module id = 55\n// module chunks = 2"],"sourceRoot":""}