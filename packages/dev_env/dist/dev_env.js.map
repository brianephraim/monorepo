{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 844ffa06ba39ec01a52c","webpack:///external \"webpack\"","webpack:///external \"fs-extra\"","webpack:///external \"path\"","webpack:///external \"yargs\"","webpack:///external \"express\"","webpack:///external \"child_process\"","webpack:///./webpackMakeCompiler.js","webpack:///./webpackConfig.js","webpack:///external \"globby\"","webpack:///./core/webpackEnhanceConfigNode.js","webpack:///./core/webpackEnhanceBaseConfig.js","webpack:///./core/webpack-config-resolve.js","webpack:///./core/webpackConfigCommandLine.js","webpack:///./core/webpackRunCompiler.js","webpack:///external \"url\"","webpack:///external \"fs\"","webpack:///./dev_env.js","webpack:///./core/shellCommand.js","webpack:///./jest/jestSpawnProcess.js","webpack:///external \"webpack-dev-middleware\"","webpack:///external \"webpack-node-externals\"","webpack:///./webpackEnhanceConfigWeb.js","webpack:///external \"html-webpack-plugin\"","webpack:///external \"string-replace-webpack-plugin\"","webpack:///external \"extract-text-webpack-plugin\"","webpack:///external \"node-sass-json-importer\"","webpack:///./pluginRegistry.js","webpack:///./webpackEnhanceEntryOutputStandard.js","webpack:///external \"directory-named-webpack-plugin\"","webpack:///./core/parseRequestResolvePlugin.js","webpack:///external \"single-line-log\"","webpack:///./core/webpackEnhanceImmediateConfig.js","webpack:///./webpackParseStatsForDepProblems.js","webpack:///external \"validate-npm-package-name\"","webpack:///./server.dev.js","webpack:///external \"write-file-webpack-plugin\"","webpack:///./core/webpackBuildCommandLine.js","webpack:///./webpackExpressServer.js","webpack:///.. lazy ^\\.\\/.*\\.express$","webpack:///external \"jquery-deferred\"","webpack:///external \"aws-sdk\"","webpack:///external \"sharp\"","webpack:///external \"ejs\"","webpack:///external \"mongoose\"","webpack:///external \"mongodb-uri\"","webpack:///external \"mime-types\"","webpack:///external \"https\"","webpack:///external \"http\"","webpack:///external \"deep-get-set\"","webpack:///external \"busboy\""],"names":["app","isDev","compiler","clientCompiler","compilers","console","log","plugin","fileName","changeTime","statSync","activeWebpackDevMiddleware","publicPath","output","stats","colors","waitUntilValid","isBuilt","done","listen","magenta","generateConfigJson","isCommandLine","entry","config","isBuild","env","dirRoot","dirroot","process","cwd","packageJson","readJsonSync","outputFiles","libraryName","name","libraryNameReduced","split","library","libraryMin","demo","entryFiles","MainApp","sync","bundleForNode","username","repository","url","replace","writeFileSync","JSON","stringify","enhance","originalConfig","module","rules","test","use","plugins","push","BannerPlugin","banner","raw","entryOnly","devtool","target","node","__dirname","__filename","externals","modulesDir","resolve","loader","exclude","DirectoryNamedWebpackPlugin","require","parseRequestResolvePlugin","path","exports","modules","extensions","requestStr","indexOf","shift","join","main","filename","pop","webpackMakeCompiler","processed","toUse","run","err","error","stack","details","info","toJson","hasErrors","errors","forEach","e","hasWarnings","warnings","w","warn","item","asyncRecurseStartApps","serverNamespaces","lastBackendApp","i","recurse","backendAppNamespace","System","then","someBackendApp","serveBackendApp","default","backendAppSettings","nameSpace","backendAppServed","nextNamespace","testdevenv","watch","testPathPattern","servers","serve","commandToRun","options","stdio","killParentOnExit","command","args","childProcess","proc","spawn","on","code","signal","kill","pid","exit","configPath","commandBody","generateLoaderParamOfUse","usePlugin","moreLoaderParams","extract","fallback","moveModify","source","modifyPath","modifyContent","sources","toCopy","pattern","filePath","filePathOut","content","readFileSync","outputFileSync","devHtmlPath","optimize","UglifyJsPlugin","include","minimize","templatePath","htmlTemplateExists","existsSync","indexHtmlSettings","chunks","template","title","LoaderOptionsPlugin","sassLoader","importer","context","usingExtractTextPlugin","loaders","replacements","replacement","PluginRegistry","registry","pluginRegistry","register","bind","Object","keys","reduce","accum","entryName","length","libraryTarget","umdNamedDefine","singleLineLog","stdout","printProgress","progress","clearLine","parseRequest","apply","resolver","request","callback","newRequestStr","obj","assign","doResolve","setModuleConstant","expressionName","fn","compilation","data","normalModuleFactory","parser","compilerParserPlugin","state","current","addVariable","resource","ensureTrailingSlash","str","ensureReadJsonSync","packageDotJsonPath","packageDotJsonContent","showProblemsInConsole","problems","moduleResource","depName","problemMsg","msg","problemInfo","findDependenciesProblems","dependencies","dep","rawRequest","validationResult","validForNewPackages","devDependencies","filter","webpackParseStatsForDepProblems","shouldShowProblemsInConsole","isMonorepo","packageDotJsonCache","packagesDir","packageFolderName","packageSomehowPublic","private","privateFromGithub","depProblems","fs","webpack","res","p","nodeModules","readdirSync","x","mod","oldConfig","LimitChunkCountPlugin","maxChunks","DefinePlugin","NODE_ENV","newConfig","port","processedCompiler"],"mappings":"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","file":"dist/dev_env.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"webpack\"), require(\"fs-extra\"), require(\"path\"), require(\"yargs\"), require(\"express\"), require(\"child_process\"), require(\"globby\"), require(\"url\"), require(\"fs\"), require(\"webpack-dev-middleware\"), require(\"webpack-node-externals\"), require(\"html-webpack-plugin\"), require(\"string-replace-webpack-plugin\"), require(\"extract-text-webpack-plugin\"), require(\"node-sass-json-importer\"), require(\"directory-named-webpack-plugin\"), require(\"single-line-log\"), require(\"validate-npm-package-name\"), require(\"write-file-webpack-plugin\"), require(\"jquery-deferred\"), require(\"aws-sdk\"), require(\"sharp\"), require(\"ejs\"), require(\"mongoose\"), require(\"mongodb-uri\"), require(\"mime-types\"), require(\"https\"), require(\"http\"), require(\"deep-get-set\"), require(\"busboy\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"@defualt/dev_env\", [\"webpack\", \"fs-extra\", \"path\", \"yargs\", \"express\", \"child_process\", \"globby\", \"url\", \"fs\", \"webpack-dev-middleware\", \"webpack-node-externals\", \"html-webpack-plugin\", \"string-replace-webpack-plugin\", \"extract-text-webpack-plugin\", \"node-sass-json-importer\", \"directory-named-webpack-plugin\", \"single-line-log\", \"validate-npm-package-name\", \"write-file-webpack-plugin\", \"jquery-deferred\", \"aws-sdk\", \"sharp\", \"ejs\", \"mongoose\", \"mongodb-uri\", \"mime-types\", \"https\", \"http\", \"deep-get-set\", \"busboy\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"@defualt/dev_env\"] = factory(require(\"webpack\"), require(\"fs-extra\"), require(\"path\"), require(\"yargs\"), require(\"express\"), require(\"child_process\"), require(\"globby\"), require(\"url\"), require(\"fs\"), require(\"webpack-dev-middleware\"), require(\"webpack-node-externals\"), require(\"html-webpack-plugin\"), require(\"string-replace-webpack-plugin\"), require(\"extract-text-webpack-plugin\"), require(\"node-sass-json-importer\"), require(\"directory-named-webpack-plugin\"), require(\"single-line-log\"), require(\"validate-npm-package-name\"), require(\"write-file-webpack-plugin\"), require(\"jquery-deferred\"), require(\"aws-sdk\"), require(\"sharp\"), require(\"ejs\"), require(\"mongoose\"), require(\"mongodb-uri\"), require(\"mime-types\"), require(\"https\"), require(\"http\"), require(\"deep-get-set\"), require(\"busboy\"));\n\telse\n\t\troot[\"@defualt/dev_env\"] = factory(root[\"webpack\"], root[\"fs-extra\"], root[\"path\"], root[\"yargs\"], root[\"express\"], root[\"child_process\"], root[\"globby\"], root[\"url\"], root[\"fs\"], root[\"webpack-dev-middleware\"], root[\"webpack-node-externals\"], root[\"html-webpack-plugin\"], root[\"string-replace-webpack-plugin\"], root[\"extract-text-webpack-plugin\"], root[\"node-sass-json-importer\"], root[\"directory-named-webpack-plugin\"], root[\"single-line-log\"], root[\"validate-npm-package-name\"], root[\"write-file-webpack-plugin\"], root[\"jquery-deferred\"], root[\"aws-sdk\"], root[\"sharp\"], root[\"ejs\"], root[\"mongoose\"], root[\"mongodb-uri\"], root[\"mime-types\"], root[\"https\"], root[\"http\"], root[\"deep-get-set\"], root[\"busboy\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_1__, __WEBPACK_EXTERNAL_MODULE_2__, __WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__, __WEBPACK_EXTERNAL_MODULE_5__, __WEBPACK_EXTERNAL_MODULE_8__, __WEBPACK_EXTERNAL_MODULE_14__, __WEBPACK_EXTERNAL_MODULE_15__, __WEBPACK_EXTERNAL_MODULE_20__, __WEBPACK_EXTERNAL_MODULE_21__, __WEBPACK_EXTERNAL_MODULE_23__, __WEBPACK_EXTERNAL_MODULE_24__, __WEBPACK_EXTERNAL_MODULE_25__, __WEBPACK_EXTERNAL_MODULE_26__, __WEBPACK_EXTERNAL_MODULE_29__, __WEBPACK_EXTERNAL_MODULE_31__, __WEBPACK_EXTERNAL_MODULE_34__, __WEBPACK_EXTERNAL_MODULE_36__, __WEBPACK_EXTERNAL_MODULE_40__, __WEBPACK_EXTERNAL_MODULE_41__, __WEBPACK_EXTERNAL_MODULE_42__, __WEBPACK_EXTERNAL_MODULE_44__, __WEBPACK_EXTERNAL_MODULE_45__, __WEBPACK_EXTERNAL_MODULE_46__, __WEBPACK_EXTERNAL_MODULE_47__, __WEBPACK_EXTERNAL_MODULE_48__, __WEBPACK_EXTERNAL_MODULE_49__, __WEBPACK_EXTERNAL_MODULE_50__, __WEBPACK_EXTERNAL_MODULE_51__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded chunks\n \t// \"0\" means \"already loaded\"\n \tvar installedChunks = {\n \t\t2: 0\n \t};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\t// \"0\" is the signal for \"already loaded\"\n \t\tif(installedChunks[chunkId] !== 0) {\n \t\t\tvar chunk = require(\"./\" + chunkId + \".js\");\n \t\t\tvar moreModules = chunk.modules, chunkIds = chunk.ids;\n \t\t\tfor(var moduleId in moreModules) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t\tfor(var i = 0; i < chunkIds.length; i++)\n \t\t\t\tinstalledChunks[chunkIds[i]] = 0;\n \t\t}\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// uncatched error handler for webpack runtime\n \t__webpack_require__.oe = function(err) {\n \t\tprocess.nextTick(function() {\n \t\t\tthrow err; // catch this error by using System.import().catch()\n \t\t});\n \t};\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 844ffa06ba39ec01a52c","module.exports = require(\"webpack\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack\"\n// module id = 0\n// module chunks = 2","module.exports = require(\"fs-extra\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs-extra\"\n// module id = 1\n// module chunks = 2","module.exports = require(\"path\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"path\"\n// module id = 2\n// module chunks = 2","module.exports = require(\"yargs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"yargs\"\n// module id = 3\n// module chunks = 2","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 4\n// module chunks = 2","module.exports = require(\"child_process\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"child_process\"\n// module id = 5\n// module chunks = 2","import webpack from 'webpack';\nimport webpackDevMiddleware from 'webpack-dev-middleware';\nimport fs from 'fs-extra';\n\n\nimport webpackConfig from './webpackConfig';\nimport webpackParseStatsForDepProblems from './webpackParseStatsForDepProblems';\n\nimport serverConfig from './server.dev';\nimport express from 'express';\n\nconst app = express()\n\nexport default (isDev) => {\n  const compiler = webpack([webpackConfig,serverConfig]);\n  const clientCompiler = compiler.compilers[0];\n  if (isDev) {\n    console.log('COMPILER WTF');\n    clientCompiler.plugin('invalid', (fileName, changeTime) => {\n      // console.trace();\n      console.log('stats', fs.statSync(fileName));\n      console.log(\"FileName: \" + fileName);\n      console.log(\"ChangeTimex:\" + changeTime);\n    });\n    const activeWebpackDevMiddleware = webpackDevMiddleware(compiler, {\n      publicPath: webpackConfig.output.publicPath,\n      stats: {\n        colors: true,\n      },\n    });\n    activeWebpackDevMiddleware.waitUntilValid((stats) => {\n      console.log('typeof stats', typeof stats);\n      // webpackParseStatsForDepProblems(stats);\n    });\n\n    let isBuilt = false;\n    const done = () =>\n      !isBuilt &&\n      app.listen(3000, () => {\n        isBuilt = true\n        console.log('BUILD COMPLETE -- Listening @ http://localhost:4000'.magenta)\n      })\n\n    compiler.plugin('done', done)\n\n    return {activeWebpackDevMiddleware,compiler};\n  }\n  return compiler;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webpackMakeCompiler.js","/*\n  This files return a function that when called generates a webpack config json.\n  `argv` is passed into this function.\n\n  when `argv.env === falsey`\n    This compiles for a dev server via webpack-dev-middleware.  No files are created to disk,\n    only created in memory.\n\n  when `argv.env === 'build'`\n    This compiles files to disk in a /dist folder and a /demo folder.\n\n  when `argv.dirroot === some path`\n    This is used when dev_env itself is compiled.\n    This very file is compiled according the config set by this file.\n    This is needed to make dev_env portable via npm.\n    babel-node needs to compile this dev_env to work,\n    but this does not play well when dev_env is in a node_modules folder.\n    So we need to compile dev_env before publishing to npm.\n    Directory paths need to be tweaked to accomplish this,\n    and that's what `argv.dirroot` helps with.\n\n\n  This function is also affected by package.json.\n\n  when package.json.bundleForNode === true\n    in conjunction with `argv.env === 'build'`, the bundle will\n    have special consideration for a node platform.\n    Only application files will be bundled.\n    node_modules and node built-in requires will not be bundled.\n*/\nimport { argv } from 'yargs';\nimport fs from 'fs-extra';\nimport globby from 'globby';\nimport webpackEnhanceConfigNode from './core/webpackEnhanceConfigNode';\nimport webpackEnhanceConfigWeb from './webpackEnhanceConfigWeb';\nimport webpackEnhanceEntryOutputStandard from './webpackEnhanceEntryOutputStandard';\nimport webpackEnhanceBaseConfig from './core/webpackEnhanceBaseConfig';\nimport webpackConfigCommandLine from './core/webpackConfigCommandLine';\n// import aaa8 from '@defualt/aaa8';\n// console.log(aaa8);\n\n// console.log(process.cwd());\n// // console.log(argv);\n// console.log({\n//   entry: path.resolve(process.cwd(), argv.entry),\n//   output: path.resolve(process.cwd(), argv.output),\n// });\n\nfunction generateConfigJson() {\n  const isCommandLine = argv.entry;\n  let config;\n  if (isCommandLine) {\n    config = webpackConfigCommandLine();\n  } else {\n    config = webpackEnhanceBaseConfig();\n    const isBuild = argv.env === 'build';\n    const dirRoot = argv.dirroot || process.cwd();\n    const packageJson = fs.readJsonSync(`${dirRoot}/package.json`);\n    const outputFiles = {};\n    const libraryName = packageJson.name;\n    const libraryNameReduced = libraryName.split('/')[1] || libraryName.split('/')[0];\n    if (isBuild) {\n      outputFiles.library = `dist/${libraryNameReduced}`;\n      outputFiles.libraryMin = `dist/${libraryNameReduced}.min`;\n      outputFiles.demo = 'dist/demo/index';\n    } else {\n      outputFiles.demo = 'boot';\n      outputFiles.library = `${libraryNameReduced}`;\n    }\n\n    let entryFiles;\n    if (argv['demo-entry']) {\n      entryFiles = {\n        [outputFiles.demo]: [argv['demo-entry']],\n      };\n    // } else if (argv['tailor-web-bundle-for-testing-of-dev-env-itself']) {\n    //   console.log('YEEEEHAW');\n    //   console.log('YEEEEHAW');\n    //   console.log('YEEEEHAW');\n    //   console.log('YEEEEHAW');\n    //   console.log('YEEEEHAW');\n    //   entryFiles = {\n    //     [outputFiles.demo]: [`${dirRoot}/packages/testdevenv-main/testdevenv-main.js`],\n    //   };\n    } else {\n      entryFiles = {\n        MainApp: globby.sync([`${dirRoot}/packages/MainApp/MainApp.js`]),\n        [outputFiles.library]: globby.sync([\n          `${dirRoot}/${libraryNameReduced}.js`,\n          `${dirRoot}/src/library/index.js`,\n        ]),\n        ...(\n          outputFiles.libraryMin ? {\n            [outputFiles.libraryMin]: globby.sync([`${dirRoot}/src/library/index.js`]),\n          } : {}\n        ),\n        [outputFiles.demo]: globby.sync([\n          `${dirRoot}/*.demo.js`,\n          `${dirRoot}/demo.js`,\n          `${dirRoot}/**/*/*.demo.js`,\n          `${dirRoot}/**/*/demo.js`,\n          `!${dirRoot}/packages/**/*`,\n          `${dirRoot}/packages/MainApp/MainApp.js`,\n          `!${dirRoot}/node_modules/**/*`,\n        ]),\n      };\n    }\n\n    config = webpackEnhanceEntryOutputStandard(\n      config, dirRoot, libraryName, entryFiles,\n    );\n    if (packageJson.bundleForNode) {\n      config = webpackEnhanceConfigNode(config);\n    } else {\n      let username = null;\n      if (packageJson.repository && packageJson.repository.url) {\n        username = packageJson.repository.url.replace('://').split('/')[1];\n      }\n      config = webpackEnhanceConfigWeb(\n        config, libraryName, isBuild, dirRoot, username, outputFiles,\n      );\n    }\n  }\n  fs.writeFileSync('./_webpack-config-preview.json', JSON.stringify(config, null, 2));\n  return config;\n}\n\nexport default generateConfigJson();\n\n\n\n// WEBPACK FOOTER //\n// ./webpackConfig.js","module.exports = require(\"globby\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"globby\"\n// module id = 8\n// module chunks = 2","/* eslint-disable no-mixed-operators */\nimport webpack from 'webpack';\nimport nodeExternals from 'webpack-node-externals';\nimport path from 'path';\n\nfunction enhance(originalConfig) {\n  const module = { ...(originalConfig && originalConfig.module) };\n  module.rules = [\n    { test: /rx\\.lite\\.aggregates\\.js/, use: 'imports-loader?define=>false' },\n    { test: /async\\.js/, use: 'imports-loader?define=>false' },\n    ...(module.rules || []),\n  ];\n\n  const plugins = originalConfig.plugins || [];\n  plugins.push(new webpack.BannerPlugin({\n    banner: 'require(\"source-map-support\").install();',\n    raw: true,\n    entryOnly: false,\n  }));\n\n  const config = {\n    ...originalConfig,\n    // devtool: 'cheap-module-eval-source-map',\n    // devtool: 'cheap-source-map',\n    // devtool: 'cheap-eval-source-map',\n    // devtool: 'source-map',\n    // devtool: 'inline-source-map',\n    devtool: 'sourcemap',\n    // devtool: 'eval',\n    module,\n    target: 'node',\n    node: {\n      ...originalConfig.node,\n      __dirname: false,\n      __filename: false,\n    },\n    externals: [\n      ...(originalConfig.externals || []),\n      nodeExternals({\n        // modulesFromFile: true,\n        modulesDir: path.resolve(__dirname.split('/packages/dev_env')[0], './node_modules'),\n      }),\n    ],\n    plugins,\n\n  };\n  return config;\n}\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackEnhanceConfigNode.js","import webpackConfigResolve from './webpack-config-resolve';\n\nfunction enhance(originalConfig) {\n  const config = {\n    module: {\n      rules: [\n        {\n          test: /\\.(js)?$/,\n          loader: 'babel-loader',\n          exclude: /(node_modules|\\.tmp)/,\n          // include: `${dirRoot}`,\n          // options: {\n          //   presets: [\n\n          //     [\n          //       'es2015',\n          //       // needed for tree shaking\n          //       { modules: false },\n          //     ],\n          //     'react',\n          //     // 'react',\n          //   ],\n          //   plugins: [\n          //     'transform-es2015-spread',\n          //     'transform-object-rest-spread',\n          //   ],\n          //   // mocha needs .babelrc,\n          //   // and .babelrc cannot use the above config\n          //   // so ignore .babelrc here\n          //   babelrc: false,\n          // },\n        },\n      ],\n    },\n    resolve: webpackConfigResolve.resolve,\n  };\n  return {\n    ...originalConfig,\n    ...config,\n  };\n}\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackEnhanceBaseConfig.js","const DirectoryNamedWebpackPlugin = require('directory-named-webpack-plugin');\nconst parseRequestResolvePlugin = require('./parseRequestResolvePlugin');\nconst path = require('path');\nmodule.exports = {\n  resolve: {\n    modules: [\n      // '/Users/brianephraim/Sites/monorepo/node_modules',\n      path.resolve('./src/library'),\n      path.resolve(process.cwd(), 'packages'),\n      path.resolve(process.cwd(), '../../packages'),\n      'node_modules',\n      // path.resolve(process.cwd(), '../monorepo/node_modules'),\n      // '../monorepo/node_modules',\n    ],\n    extensions: [\n      '.js',\n\n      // Why is this here? : https://github.com/npm/normalize-package-data/issues/88\n      // Issue only appeard when webpack run on command line for Node bundle\n      '.json',\n    ],\n    plugins: [\n      parseRequestResolvePlugin((requestStr) => {\n        // console.log('requestStr', requestStr);\n        if (requestStr.indexOf('@') === 0 && requestStr.indexOf('/') !== -1) {\n          const split = requestStr.split('/');\n          split.shift();\n          split.join('/');\n          console.log('Afindme',split.join('/'),requestStr.split('/')[1]);\n          console.log('Bfindme',requestStr.split('/')[1]);\n          return split.join('/');\n          return requestStr.split('/')[1];\n        }\n        return false;\n      }),\n      new DirectoryNamedWebpackPlugin(true),\n    ],\n  },\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpack-config-resolve.js","import fs from 'fs-extra';\nimport { argv } from 'yargs';\nimport webpackEnhanceBaseConfig from './webpackEnhanceBaseConfig';\nimport webpackEnhanceConfigNode from './webpackEnhanceConfigNode';\nimport webpackEnhanceImmediateConfig from './webpackEnhanceImmediateConfig';\n\nfunction enhance() {\n  let config = webpackEnhanceBaseConfig();\n  const entry = {\n    main: argv.entry,\n  };\n  let output = argv.output;\n  output = output.split('/');\n\n  output = {\n    filename: output.pop(),\n    path: output.join('/'),\n  };\n  config = {\n    ...config,\n    entry,\n    output,\n  };\n  config = webpackEnhanceConfigNode(config);\n  config = webpackEnhanceImmediateConfig(config);\n  fs.writeFileSync('./_webpack-config-preview-commandline.json', JSON.stringify(config, null, 2));\n  return config;\n}\n\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackConfigCommandLine.js","export default (webpackMakeCompiler) => {\n  const processed = webpackMakeCompiler();\n  console.log(processed.activeWebpackDevMiddleware);\n  const toUse = processed.activeWebpackDevMiddleware ? processed.activeWebpackDevMiddleware : processed;\n  toUse.run((err, stats) => {\n    console.log('RUN COMPILER');\n    if (err) {\n      console.error(err.stack || err);\n      if (err.details) {\n        console.error(err.details);\n      }\n    }\n\n    const info = stats.toJson();\n\n    if (stats.hasErrors()) {\n      info.errors.forEach((e) => {\n        console.error('\\x1b[31m', e, '\\x1b[0m');\n      });\n    }\n\n    if (stats.hasWarnings()) {\n      info.warnings.forEach((w) => {\n        console.warn('\\x1b[33m', w, '\\x1b[0m');\n      });\n    }\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackRunCompiler.js","module.exports = require(\"url\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"url\"\n// module id = 14\n// module chunks = 2","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 15\n// module chunks = 2","/* eslint-disable no-console */\nimport { argv } from 'yargs';\nimport shellCommand from './core/shellCommand';\nimport jestSpawnProcess from './jest/jestSpawnProcess';\nimport webpackMakeCompiler from './webpackMakeCompiler';\nimport webpackRunCompiler from './core/webpackRunCompiler';\nimport webpackBuildCommandLine from './core/webpackBuildCommandLine';\nimport serve from './webpackExpressServer.js';\n// import isWithinMonoRepo from './core/isWithinMonoRepo');\n\nconst env = argv.env;\nconst item = argv.item;\n\nfunction asyncRecurseStartApps(serverNamespaces) {\n  let lastBackendApp = null;\n  let i = 0;\n  function recurse(backendAppNamespace) {\n    System.import(`../../packages/${backendAppNamespace}/${backendAppNamespace}.express`).then((someBackendApp) => {\n      const serveBackendApp = someBackendApp.default;\n      const backendAppSettings = {\n        nameSpace: backendAppNamespace,\n      };\n      if (lastBackendApp) {\n        backendAppSettings.app = lastBackendApp;\n      }\n      const backendAppServed = serveBackendApp(backendAppSettings);\n      lastBackendApp = backendAppServed;\n      const nextNamespace = serverNamespaces[++i];\n      if (nextNamespace) {\n        recurse(nextNamespace);\n      } else {\n        serve({\n          app: backendAppServed,\n        });\n      }\n    });\n  }\n  recurse(serverNamespaces[i]);\n}\n\nif (item) {\n  shellCommand(`(cd ./packages/${item} && npm run start)`);\n} else if (env === 'test') {\n  jestSpawnProcess(argv.testdevenv, argv.watch, argv.testPathPattern);\n} else if (argv.entry) {\n  webpackBuildCommandLine();\n} else if (env === 'build') {\n  webpackRunCompiler(webpackMakeCompiler);\n} else if (argv.servers) {\n  const serverNamespaces = argv.servers.split(',');\n  asyncRecurseStartApps(serverNamespaces);\n} else {\n  serve({});\n}\n\nexport { serve };\n\n\n// WEBPACK FOOTER //\n// ./dev_env.js","/* eslint-disable global-require */\nmodule.exports = (commandToRun, options = { stdio: 'inherit' }, killParentOnExit = true) => {\n  const command = 'sh';\n  const args = [\n    '-c',\n    commandToRun,\n  ];\n  //\n  // kexec doesn't work in windows, so fallback to child_process.spawn\n  // this logic copied from babel-cli/lib/babel-node.js\n  // try {\n  //   const kexec = require('kexec');\n  //   kexec(command, args);\n  // } catch (err) {\n    // if (err.code !== 'MODULE_NOT_FOUND') throw err;\n\n  const childProcess = require('child_process');\n  const proc = childProcess.spawn(command, args, options || {});\n  proc.on('exit', (code, signal) => {\n    if (killParentOnExit) {\n      process.on('exit', () => {\n        if (signal) {\n          process.kill(process.pid, signal);\n        } else {\n          process.exit(code);\n        }\n      });\n    }\n  });\n  return proc;\n  // }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/shellCommand.js","/* eslint-disable camelcase */\nimport child_process from 'child_process';\nimport path from 'path';\n\n// import jestConfig from './jestConfig';\n// const config = `'${JSON.stringify(jestConfig).replace(/'/g, \"\\\\'\")}'`;\n\nconst configPath = `${__dirname}/jestConfig.js`;\n// const configBasePath = `${__dirname}/jestConfigBase.js`;\n// qwer();\n\nexport default (testdevenv, watch = true, testPathPattern) => {\n  const command = 'sh';\n  // Why `CI=true `? ----- https://github.com/facebook/jest/issues/2959\n  let commandBody = `CI=true ${process.cwd()}/node_modules/.bin/jest --watch=${watch && watch !== 'false' ? 'true' : 'false'} --config=${configPath}${testPathPattern ? [\" --testPathPattern='\",testPathPattern,\"'\"].join('') : ''}`;\n  if (testdevenv) {\n    // commandBody = `CI=true ${process.cwd()}/node_modules/.bin/jest -t testdevenv --config=${configBasePath}`;\n    // commandBody = `CI=true ${process.cwd()}/node_modules/.bin/jest ${__dirname}/testdevenv.js  --config=${configBasePath}`;\n    commandBody = `CI=true ${process.cwd()}/node_modules/.bin/mocha-webpack --colors --require babel-core/register --webpack-config ${path.resolve(__dirname, '../core/webpackConfigMocha.js')} \\\"${path.resolve(__dirname, './testdevenv2.js')}\\\" --require source-map-support/register`;\n  }\n  const args = [\n    '-c',\n    commandBody,\n  ];\n  const proc = child_process.spawn(command, args, { stdio: 'inherit' });\n  proc.on('exit', (code, signal) => {\n    process.on('exit', () => {\n      if (signal) {\n        process.kill(process.pid, signal);\n      } else {\n        process.exit(code);\n      }\n    });\n  });\n};\n\n\n\n// WEBPACK FOOTER //\n// ./jest/jestSpawnProcess.js","module.exports = require(\"webpack-dev-middleware\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-dev-middleware\"\n// module id = 20\n// module chunks = 2","module.exports = require(\"webpack-node-externals\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"webpack-node-externals\"\n// module id = 21\n// module chunks = 2","/* eslint-disable no-mixed-operators */\nimport webpack from 'webpack';\nimport HtmlWebpackPlugin from 'html-webpack-plugin';\nimport StringReplacePlugin from 'string-replace-webpack-plugin';\nimport ExtractTextPlugin from 'extract-text-webpack-plugin';\nimport jsonImporter from 'node-sass-json-importer';\nimport fs from 'fs-extra';\nimport globby from 'globby';\nimport plugins, { register as registerPlugin } from './pluginRegistry';\n\n\nfunction generateLoaderParamOfUse(usePlugin, moreLoaderParams) {\n  if (usePlugin) {\n    return { use: ExtractTextPlugin.extract(moreLoaderParams) };\n  }\n  return {\n    use: [moreLoaderParams.fallback, ...moreLoaderParams.use],\n  };\n}\n\nfunction moveModify(source, modifyPath, modifyContent) {\n  let sources = [];\n  if (typeof source === 'object') {\n    sources = source;\n  } else {\n    sources.push(source);\n  }\n  let toCopy = [];\n  sources.forEach((pattern) => {\n    toCopy = [\n      ...toCopy,\n      ...globby.sync(pattern),\n    ];\n  });\n  toCopy.forEach((filePath) => {\n    let filePathOut = filePath;\n    if (modifyPath) {\n      filePathOut = modifyPath(filePath);\n    }\n    let content = fs.readFileSync(filePath, 'utf8');\n    if (modifyContent) {\n      content = modifyContent(content, filePath, filePathOut);\n    }\n    fs.outputFileSync(filePathOut, content);\n  });\n}\n\nfunction enhance(originalConfig, libraryName, isBuild, dirRoot, username, outputFiles) {\n  const devHtmlPath = './index.html';\n  if (isBuild) {\n    moveModify(['src/import-examples/**/!(webpack.config).*', 'src/tonicExample.js'], (filePath) => {\n      return filePath.replace('src/', './');\n    },\n    (content) => {\n      return content.replace(/LIBRARYNAME/g, libraryName);\n    });\n\n    registerPlugin('UglifyJsPlugin', new webpack.optimize.UglifyJsPlugin({\n      include: /\\.min\\.js$/,\n      minimize: true,\n    }));\n\n    const templatePath = 'src/demo/index.ejs';\n    const htmlTemplateExists = fs.existsSync(templatePath);\n    const indexHtmlSettings = {\n      chunks: [outputFiles.demo],\n      ...(\n        htmlTemplateExists ? { template: templatePath } : {}\n      ),\n      title: 'afasdfasdfasd',\n      username,\n      libraryName,\n    };\n    registerPlugin('demoIndex-HtmlWebpackPlugin', new HtmlWebpackPlugin({\n      filename: './dist/demo/index.html',\n      ...indexHtmlSettings,\n    }));\n  } else {\n    // registerPlugin('demoDevIndex-HtmlWebpackPlugin', new HtmlWebpackPlugin({\n    //   chunks: [outputFiles.demo],\n    //   filename: devHtmlPath,\n    // }));\n  }\n\n  registerPlugin('StringReplacePlugin', new StringReplacePlugin());\n\n  registerPlugin('LoaderOptionsPlugin', new webpack.LoaderOptionsPlugin({\n    options: {\n      sassLoader: {\n        importer: jsonImporter,\n      },\n      context: dirRoot,\n    },\n  }));\n\n\n  const module = { ...(originalConfig && originalConfig.module) };\n  let usingExtractTextPlugin = false;\n  if (isBuild) {\n    registerPlugin('ExtractTextPlugin', new ExtractTextPlugin('[name].css'));\n    usingExtractTextPlugin = true;\n  }\n  module.rules = [\n    ...(module.rules || []),\n    {\n      test: /\\.css$/,\n      ...generateLoaderParamOfUse(usingExtractTextPlugin, {\n        fallback: 'style-loader',\n        use: ['css-loader'],\n      }),\n    },\n    {\n      test: /\\.scss$/,\n      ...generateLoaderParamOfUse(usingExtractTextPlugin, {\n        fallback: 'style-loader',\n        use: [\n          'css-loader?sourceMap',\n          {\n            loader: 'sass-loader?sourceMap',\n            // Apply the JSON importer via sass-loader's options.\n            options: {\n              importer: jsonImporter,\n            },\n          },\n        ],\n      }),\n    },\n    {\n      test: /\\.json$/,\n      loaders: ['json-loader'],\n    },\n    {\n      test: /\\.ejs$/,\n      loader: 'ejs-compiled-loader',\n    },\n    {\n      test: /\\.md/,\n      loaders: ['html-loader', 'markdown-loader'],\n    },\n    {\n      test: /\\.js|\\.html|\\.ejs$/,\n      exclude: [__filename],\n      loader: StringReplacePlugin.replace({\n        replacements: [{\n          pattern: /LIBRARYNAME/g,\n          replacement(/* match, p1, offset, string */) {\n            return libraryName;\n          },\n        }],\n      }),\n    },\n  ];\n\n  const config = {\n    ...originalConfig,\n    // devtool: isBuild ? 'source-map' : 'cheap-module-eval-source-map',\n    devtool: 'source-map',\n    module,\n    plugins,\n  };\n  return config;\n}\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./webpackEnhanceConfigWeb.js","module.exports = require(\"html-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"html-webpack-plugin\"\n// module id = 23\n// module chunks = 2","module.exports = require(\"string-replace-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"string-replace-webpack-plugin\"\n// module id = 24\n// module chunks = 2","module.exports = require(\"extract-text-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"extract-text-webpack-plugin\"\n// module id = 25\n// module chunks = 2","module.exports = require(\"node-sass-json-importer\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-sass-json-importer\"\n// module id = 26\n// module chunks = 2","class PluginRegistry {\n  constructor() {\n    this.registry = {};\n    this.plugins = [];\n  }\n  register(name, plugin) {\n    if (!this.registry[name]) {\n      this.plugins.push(plugin);\n      this.registry[name] = true;\n      return true;\n    }\n    return false;\n  }\n}\n\nconst pluginRegistry = new PluginRegistry();\nconst plugins = pluginRegistry.plugins;\nconst register = pluginRegistry.register.bind(pluginRegistry);\nexport { register };\nexport default plugins;\n\n\n\n// WEBPACK FOOTER //\n// ./pluginRegistry.js","function enhance(originalConfig, dirRoot, libraryName, entryFiles) {\n  const entry = Object.keys(entryFiles).reduce((accum, entryName) => {\n    if (entryFiles[entryName].length) {\n      accum[entryName] = entryFiles[entryName];\n    }\n    return accum;\n  }, {});\n\n  const output = {\n    path: `${dirRoot}`,\n    filename: '[name].js',\n    library: libraryName,\n    libraryTarget: 'umd',\n    umdNamedDefine: true,\n    publicPath: '/',\n    // publicPath: '/assets/',\n  };\n\n  return {\n    ...originalConfig,\n    entry,\n    output,\n  };\n}\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./webpackEnhanceEntryOutputStandard.js","module.exports = require(\"directory-named-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"directory-named-webpack-plugin\"\n// module id = 29\n// module chunks = 2","/* eslint-disable func-names */\nconst singleLineLog = require('single-line-log').stdout;\n\nfunction printProgress(progress) {\n  if (!process || !process.stdout || !process.stdout.clearLine) {\n    return;\n  }\n  singleLineLog(`Resolving: ${progress}\\n`);\n  // process.stdout.clearLine();\n  // process.stdout.cursorTo(0);\n  // process.stdout.write(progress + `-xxxxxx`);\n}\nfunction parseRequestResolvePlugin(parseRequest = () => {}) {\n  return {\n    apply(resolver) {\n      // I don't know why 'module' or 'resolve' are those values.\n      // Something to do with the the way they are used in this file:\n      // https://github.com/webpack/enhanced-resolve/blob/master/lib/ResolverFactory.js\n      // So they can be other values as seen in that file.\n      resolver.plugin(/* 'modules'*/ 'resolve', function (request, callback) {\n        printProgress(`${request.request}`);\n        // console.log('request.request',request.request)\n        const newRequestStr = parseRequest(request.request);\n        if (newRequestStr && newRequestStr !== request.request) {\n          const obj = Object.assign({}, request, {\n            request: newRequestStr,\n          });\n          this.doResolve('resolve', obj, 'blah blah', callback);\n        } else {\n          // process.stdout.write(`\\n`);\n          callback();\n        }\n      });\n    },\n  };\n}\n\nmodule.exports = parseRequestResolvePlugin;\n\n\n\n// WEBPACK FOOTER //\n// ./core/parseRequestResolvePlugin.js","module.exports = require(\"single-line-log\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"single-line-log\"\n// module id = 31\n// module chunks = 2","\nfunction enhance(originalConfig) {\n  const config = { ...originalConfig };\n  config.plugins = config.plugins || [];\n\n  // I needed __dirname hardcoded as the original dirname\n  // https://github.com/webpack/webpack/issues/1599#issuecomment-266588898\n  config.plugins.push({\n    apply(compiler) {\n      function setModuleConstant(expressionName, fn) {\n        compiler.plugin('compilation', (compilation, data) => {\n          data.normalModuleFactory.plugin('parser', (parser) => {\n            parser.plugin(`expression ${expressionName}`, function compilerParserPlugin() {\n              this.state.current.addVariable(expressionName, JSON.stringify(fn(this.state.module)));\n              return true;\n            });\n          });\n        });\n      }\n\n      setModuleConstant('__filename', (module) => {\n        return module.resource;\n      });\n\n      setModuleConstant('__dirname', (module) => {\n        return module.context;\n      });\n    },\n  });\n  return config;\n}\n\nexport default enhance;\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackEnhanceImmediateConfig.js","/* eslint-disable no-console */\nimport fs from 'fs-extra';\nimport validateNpmPackageName from 'validate-npm-package-name';\n\nfunction ensureTrailingSlash(str) {\n  return str.replace(/\\/?$/, '/');\n}\n\nfunction ensureReadJsonSync(packageDotJsonPath) {\n  let packageDotJsonContent;\n  try {\n    packageDotJsonContent = fs.readJsonSync(packageDotJsonPath);\n  } catch (e) {\n    packageDotJsonContent = {};\n  }\n  return packageDotJsonContent;\n}\n\nfunction showProblemsInConsole(problems) {\n  if (Object.keys(problems).length) {\n    console.info('\\x1b[1m', '\\nProblems with dependencies', '\\x1b[0m');\n  }\n  Object.keys(problems).forEach((moduleResource) => {\n    console.info('\\x1b[36m', '\\nProblem in module with `import` statement:', '\\x1b[0m');\n    console.info('\\x1b[37m', ` ${moduleResource}`, '\\x1b[0m');\n    Object.keys(problems[moduleResource]).forEach((depName) => {\n      const problemMsg = problems[moduleResource][depName].msg;\n      console.info('\\x1b[33m', 'Dependency requested as:', '\\x1b[0m');\n      console.info('\\x1b[37m', ` ${depName}`, '\\x1b[0m');\n      console.info('\\x1b[33m', `Message: ${problemMsg}`, '\\x1b[0m');\n      const problemInfo = problems[moduleResource][depName].info;\n      if (problemInfo) {\n        console.info('\\x1b[37m', `- ${problemInfo.join('\\n - ')}`, '\\x1b[0m');\n      }\n    });\n  });\n}\n\nfunction findDependenciesProblems(dependencies, packageDotJsonContent) {\n  const problems = {};\n\n  dependencies.forEach((dep) => {\n    if (dep.module) {\n      const rawRequest = dep.module.rawRequest;\n      // if (rawRequest.indexOf('/Users/brianephraim/Sites/monorepo/packages') === 0) {\n      //   console.info('\\x1b[33m', 'depWTF', rawRequest, '\\x1b[0m');\n      //   console.log('depWTF', dep);\n      // } else {\n      //   console.info('\\x1b[33m', 'depGGG', rawRequest, '\\x1b[0m');\n      //   console.log('depGGG', dep);\n      // }\n\n      // not a relative dependency\n      // not an absolut dependency\n      // we are only concerned with depenencies referenced like\n      // `import asdf from 'asdf';`\n      // or\n      // `import qwer from 'asdf/qwer';``\n      // or\n      // `import asdf from '@defualt/asdf';``\n      // These dependencies will be either in /node_modules/ or /packages/,\n      // the latter for only monorepo use.\n      if (rawRequest && rawRequest.indexOf('.') !== 0 && rawRequest.indexOf('/') !== 0) {\n        const validationResult = validateNpmPackageName(rawRequest);\n        if (validationResult.validForNewPackages) {\n          if (\n            !packageDotJsonContent ||\n            (\n              (\n                !packageDotJsonContent.dependencies ||\n                !packageDotJsonContent.dependencies[rawRequest]\n              ) &&\n              (\n                !packageDotJsonContent.devDependencies ||\n                !packageDotJsonContent.devDependencies[rawRequest]\n              )\n            )\n          ) {\n            problems[rawRequest] = { msg: 'MISSING FROM PACKAGE.JSON' };\n          }\n        } else {\n          const info = [\n            ...validationResult.warnings || [], ...validationResult.errors || [],\n          ].filter((msg) => {\n            return msg !== 'name can only contain URL-friendly characters';\n          });\n          // console.log(validationResult);\n          if (info.length) {\n            problems[rawRequest] = {\n              msg: 'BAD FORMATTING',\n              info: [...validationResult.warnings || [], ...validationResult.errors || []],\n            };\n          }\n        }\n      }\n    }\n  });\n\n  return Object.keys(problems).length ? problems : null;\n}\n\nfunction webpackParseStatsForDepProblems(stats, shouldShowProblemsInConsole = true) {\n  const isMonorepo = fs.existsSync(`${process.cwd()}/packages`);\n\n  const packageDotJsonCache = {};\n  const problems = {};\n  console.log('GGGGGG');\n  stats.compilation.modules.forEach((module) => {\n    // only concerned with module entries from /packages/ folder (not node_modules)\n    if (\n      module.resource &&\n      module.resource.indexOf('node_modules') === -1\n    ) {\n      let packageDotJsonPath;\n      if (isMonorepo) {\n        let packagesDir = `${process.cwd()}/packages`;\n        packagesDir = ensureTrailingSlash(packagesDir);\n        // get substring from first trailing slash after whatever packagesDir is\n        console.log(module.resource);\n        const packageFolderName = module.resource.split(packagesDir)[1].split('/')[0];\n        packageDotJsonPath = `${packagesDir}${packageFolderName}/package.json`;\n      } else {\n        packageDotJsonPath = `${process.cwd()}/package.json`;\n      }\n\n      const packageDotJsonContent = (\n        packageDotJsonCache[packageDotJsonPath] || ensureReadJsonSync(packageDotJsonPath)\n      );\n      packageDotJsonCache[packageDotJsonPath] = packageDotJsonContent;\n\n      const packageSomehowPublic = (\n        !packageDotJsonContent.private ||\n        !packageDotJsonContent.privateFromGithub\n      );\n\n      // only concerned if module's package.json is not empty,\n      // and if it is public on either NPM or Girhub\n      if (Object.keys(packageDotJsonContent).length && packageSomehowPublic) {\n        const depProblems = findDependenciesProblems(module.dependencies, packageDotJsonContent);\n        if (depProblems) {\n          problems[module.resource] = depProblems;\n        }\n      }\n    }\n  });\n  if (Object.keys(problems).length > 0 && shouldShowProblemsInConsole) {\n    showProblemsInConsole(problems);\n  }\n\n  return problems;\n}\n\nexport default webpackParseStatsForDepProblems;\n\n\n\n// WEBPACK FOOTER //\n// ./webpackParseStatsForDepProblems.js","module.exports = require(\"validate-npm-package-name\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"validate-npm-package-name\"\n// module id = 34\n// module chunks = 2","import WriteFilePlugin from 'write-file-webpack-plugin';\nimport webpackConfigResolve from './core/webpack-config-resolve';\nimport webpackConfig from './webpackConfig';\nconst fs = require('fs')\nconst path = require('path')\nconst webpack = require('webpack')\n// const WriteFilePlugin = require('write-file-webpack-plugin')\n\nconst res = p => path.resolve(__dirname, p)\n\nconst nodeModules = res('../../../node_modules')\nconst entry = res('./render.js')\nconst output = res('../buildServer')\n\nconsole.log('entry',entry);\n\n// if you're specifying externals to leave unbundled, you need to tell Webpack\n// to still bundle `react-universal-component`, `webpack-flush-chunks` and\n// `require-universal-module` so that they know they are running\n// within Webpack and can properly make connections to client modules:\nconst externals = fs\n  .readdirSync(nodeModules)\n  .filter(x => !/\\.bin|react-universal-component|webpack-flush-chunks/.test(x))\n  .reduce((externals, mod) => {\n    externals[mod] = `commonjs ${mod}`\n    return externals\n  }, {})\n\nexternals['react-dom/server'] = 'commonjs react-dom/server'\n\nconst oldConfig = {\n  name: 'server',\n  target: 'node',\n  // devtool: 'source-map',\n  devtool: 'eval',\n  entry: [entry],\n  externals,\n  output: {\n    path: output,\n    filename: '[name].js',\n    libraryTarget: 'commonjs2'\n  },\n  // module: {\n  //   rules: [\n  //     {\n  //       test: /\\.js$/,\n  //       exclude: /node_modules/,\n  //       use: 'babel-loader'\n  //     },\n  //     {\n  //       test: /\\.styl$/,\n  //       exclude: /node_modules/,\n  //       use: [\n  //         {\n  //           loader: 'css-loader/locals',\n  //           options: {\n  //             modules: true,\n  //             localIdentName: '[name]__[local]--[hash:base64:5]'\n  //           }\n  //         },\n  //         {\n  //           loader: 'stylus-loader'\n  //         }\n  //       ]\n  //     }\n  //   ]\n  // },\n  // ...webpackConfigResolve,\n  plugins: [\n    new WriteFilePlugin(),\n    ...webpackConfig.plugins,\n    // new WriteFilePlugin(),\n    new webpack.optimize.LimitChunkCountPlugin({\n      maxChunks: 1\n    }),\n\n    new webpack.DefinePlugin({\n      'process.env': {\n        NODE_ENV: JSON.stringify('development')\n      }\n    })\n  ]\n}\n\nconst newConfig = {...webpackConfig, ...oldConfig};\n\nexport default newConfig;\n\n\n\n// WEBPACK FOOTER //\n// ./server.dev.js","module.exports = require(\"write-file-webpack-plugin\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"write-file-webpack-plugin\"\n// module id = 36\n// module chunks = 2","import webpack from 'webpack';\nimport webpackRunCompiler from './webpackRunCompiler';\nimport webpackConfig from './webpackConfigCommandLine';\n\nfunction webpackMakeCompiler() {\n  const config = webpackConfig();\n  const compiler = webpack(config);\n  return compiler;\n}\n\nexport default () => {\n  webpackRunCompiler(webpackMakeCompiler);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./core/webpackBuildCommandLine.js","/* eslint-disable no-console */\n\nimport express from 'express';\nimport url from 'url';\nimport webpackMakeCompiler from './webpackMakeCompiler';\n\nexport default ({app, port = 3000}) => {\n  // console.log('SERVE');\n  // // This module either extends an existing express app\n  // // or creates a new express app\n  // let appIsBrandNew = false;\n  // if (!app) {\n  //   appIsBrandNew = true;\n  //   app = express();\n  // }\n\n  // console.log('SERVE',appIsBrandNew);\n\n  // // SPA server support\n  // // All URLs that suggest an HTML file request get routed the same.\n  // app.use((req, res, next) => {\n  //   const lastPartOfURL = url.parse(req.url).pathname.split('/').pop();\n  //   const urlFormatSuggestsHtmlFileRequest = (\n  //     lastPartOfURL.indexOf('.') === -1 || lastPartOfURL.indexOf('.html') !== -1\n  //   );\n  //   if (urlFormatSuggestsHtmlFileRequest) {\n  //     req.url = '/';\n  //   }\n  //   next();\n  // });\n\n  console.info('🔷 Starting webpack ...');\n\n  const processedCompiler = webpackMakeCompiler(true);\n  \n\n  return app;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webpackExpressServer.js","var map = {\n\t\"./bernieserver/bernieserver.express\": [\n\t\t43,\n\t\t0\n\t],\n\t\"./junk-express/junk-express.express\": [\n\t\t52,\n\t\t1\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tvar ids = map[req];\n\tif(!ids)\n\t\treturn Promise.reject(new Error(\"Cannot find module '\" + req + \"'.\"));\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(ids[0]);\n\t});\n};\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 39;\nmodule.exports = webpackAsyncContext;\n\n\n//////////////////\n// WEBPACK FOOTER\n// .. lazy ^\\.\\/.*\\.express$\n// module id = 39\n// module chunks = 2","module.exports = require(\"jquery-deferred\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jquery-deferred\"\n// module id = 40\n// module chunks = 2","module.exports = require(\"aws-sdk\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-sdk\"\n// module id = 41\n// module chunks = 2","module.exports = require(\"sharp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"sharp\"\n// module id = 42\n// module chunks = 2","module.exports = require(\"ejs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"ejs\"\n// module id = 44\n// module chunks = 2","module.exports = require(\"mongoose\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongoose\"\n// module id = 45\n// module chunks = 2","module.exports = require(\"mongodb-uri\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mongodb-uri\"\n// module id = 46\n// module chunks = 2","module.exports = require(\"mime-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mime-types\"\n// module id = 47\n// module chunks = 2","module.exports = require(\"https\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"https\"\n// module id = 48\n// module chunks = 2","module.exports = require(\"http\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"http\"\n// module id = 49\n// module chunks = 2","module.exports = require(\"deep-get-set\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"deep-get-set\"\n// module id = 50\n// module chunks = 2","module.exports = require(\"busboy\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"busboy\"\n// module id = 51\n// module chunks = 2"],"sourceRoot":""}